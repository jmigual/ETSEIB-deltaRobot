\hypertarget{classdynamixel}{}\section{dynamixel Class Reference}
\label{classdynamixel}\index{dynamixel@{dynamixel}}


Dynamixel 1.\+0 protocol class.  




{\ttfamily \#include $<$dynamixel.\+h$>$}



Collaboration diagram for dynamixel\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=141pt]{df/d4c/classdynamixel__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classdynamixel_a5d4fed957a4b2d1690c0fa72127f5cbf}{dynamixel} (Q\+String port\+\_\+num, int baud\+\_\+rate=1000000)
\begin{DoxyCompactList}\small\item\em Initialization constructor. \end{DoxyCompactList}\item 
bool \hyperlink{classdynamixel_a5ae4b2c6eb4c91f404f973ee8e6a1914}{is\+Open} ()
\begin{DoxyCompactList}\small\item\em True if the port is open. \end{DoxyCompactList}\item 
int \hyperlink{classdynamixel_a87960244d5846ae7583e37d2407eb61e}{initialize} (Q\+String port\+\_\+num, int baud\+\_\+rate)
\begin{DoxyCompactList}\small\item\em Initializates the port. \end{DoxyCompactList}\item 
int \hyperlink{classdynamixel_a7554c7889896e29e11a62027d89f3fdf}{change\+\_\+baudrate} (int baud\+\_\+rate)
\begin{DoxyCompactList}\small\item\em Changes the current baud rate. \end{DoxyCompactList}\item 
int \hyperlink{classdynamixel_a92ea074ed1c1a9cf29e039f8c425f01a}{terminate} (void)
\begin{DoxyCompactList}\small\item\em Closes the comunication. \end{DoxyCompactList}\item 
int \hyperlink{classdynamixel_ac8440d5d34ae3c4618b28fdbbd748edc}{get\+\_\+comm\+\_\+result} ()
\begin{DoxyCompactList}\small\item\em Returns the current com status. \end{DoxyCompactList}\item 
void \hyperlink{classdynamixel_a479187cd8940c16dd4374eb5be22b888}{tx\+\_\+packet} (void)
\begin{DoxyCompactList}\small\item\em Sends a packet. \end{DoxyCompactList}\item 
void \hyperlink{classdynamixel_aa26d2d2dff768563a1cb1480aa061608}{rx\+\_\+packet} (void)
\begin{DoxyCompactList}\small\item\em Receives a packet. \end{DoxyCompactList}\item 
void \hyperlink{classdynamixel_aebfc569c6b1eb0b98f8c385f0f921fc0}{txrx\+\_\+packet} (void)
\begin{DoxyCompactList}\small\item\em Sends and receives a packet. \end{DoxyCompactList}\item 
void \hyperlink{classdynamixel_a84e24c72c3e5be866f8b28c2e5bd1d95}{set\+\_\+txpacket\+\_\+id} (int id)
\begin{DoxyCompactList}\small\item\em Sets the sending packet I\+D. \end{DoxyCompactList}\item 
void \hyperlink{classdynamixel_a209a43f983f214323b6f0a627d5e8c13}{set\+\_\+txpacket\+\_\+instruction} (int instruction)
\begin{DoxyCompactList}\small\item\em Sets the sending packet instruction. \end{DoxyCompactList}\item 
void \hyperlink{classdynamixel_a2c3d31bbbed70a69918e9972a620384b}{set\+\_\+txpacket\+\_\+parameter} (int index, int value)
\begin{DoxyCompactList}\small\item\em Sets the sending packet parameter. \end{DoxyCompactList}\item 
void \hyperlink{classdynamixel_a829278f48e21c810b172eb8cab3b86de}{set\+\_\+txpacket\+\_\+length} (int length)
\begin{DoxyCompactList}\small\item\em Sets the sending packet length. \end{DoxyCompactList}\item 
bool \hyperlink{classdynamixel_a843b0aac721e4264e7e3097f80980243}{get\+\_\+rxpacket\+\_\+error} (int error)
\begin{DoxyCompactList}\small\item\em Returns false if no receive error and true if there\textquotesingle{}s an error. \end{DoxyCompactList}\item 
int \hyperlink{classdynamixel_a6e62341ef9f51b6e152e769bd7be9d75}{get\+\_\+rxpacket\+\_\+error\+\_\+byte} (void)
\begin{DoxyCompactList}\small\item\em Returns the error byte. \end{DoxyCompactList}\item 
int \hyperlink{classdynamixel_a68b5fa99719a9aec0734ecfb0635503b}{get\+\_\+rxpacket\+\_\+parameter} (int index)
\begin{DoxyCompactList}\small\item\em Returns the received parameter. \end{DoxyCompactList}\item 
int \hyperlink{classdynamixel_ae9cc18fdeda8329f68fa0f2f0a7a9aba}{get\+\_\+rxpacket\+\_\+length} ()
\begin{DoxyCompactList}\small\item\em Returns the received packet length. \end{DoxyCompactList}\item 
void \hyperlink{classdynamixel_af2bd714423e7c4fc089762805c0c71f3}{ping} (int id)
\begin{DoxyCompactList}\small\item\em Ping to the selected id, check com status for the ping result. \end{DoxyCompactList}\item 
int \hyperlink{classdynamixel_a888404b41c4c4395a0b745c77ff2cea9}{read\+\_\+byte} (int id, int address)
\begin{DoxyCompactList}\small\item\em Reads a byte from the selected I\+D at the selected address. \end{DoxyCompactList}\item 
void \hyperlink{classdynamixel_a66c1e32cc45dd46d329f1fc212e46a3d}{write\+\_\+byte} (int id, int address, int value)
\begin{DoxyCompactList}\small\item\em Writes a byte to the selected I\+D at the selected address. \end{DoxyCompactList}\item 
int \hyperlink{classdynamixel_a45e99341e82c5114f6e829c9141bf96f}{read\+\_\+word} (int id, int address)
\begin{DoxyCompactList}\small\item\em Reads a word to the selected I\+D at the selected address. \end{DoxyCompactList}\item 
void \hyperlink{classdynamixel_a925f62ce5e261e5ef4fe6dc46bdc7c63}{write\+\_\+word} (int id, int address, int value)
\begin{DoxyCompactList}\small\item\em Writes a word to the selected I\+D at the selected address. \end{DoxyCompactList}\item 
double \hyperlink{classdynamixel_a2fa5375537184c279a9ebfcfc0425071}{get\+\_\+packet\+\_\+time} ()
\begin{DoxyCompactList}\small\item\em Returns the packet time. \end{DoxyCompactList}\item 
void \hyperlink{classdynamixel_a067f82c21ed176e18fa224d16f3d1c5b}{set\+\_\+packet\+\_\+timeout} (int Num\+Rcv\+Byte)
\begin{DoxyCompactList}\small\item\em Sets the timeout in number of received bytes. \end{DoxyCompactList}\item 
void \hyperlink{classdynamixel_a125b42f776c4aac520f274074f68b591}{set\+\_\+packet\+\_\+timeout\+\_\+ms} (int msec)
\begin{DoxyCompactList}\small\item\em Sets the timeout in ms. \end{DoxyCompactList}\item 
bool \hyperlink{classdynamixel_a00d08481ebc4dee19debecf43f888522}{is\+\_\+packet\+\_\+timeout} ()
\begin{DoxyCompactList}\small\item\em Returns true if the packet is timeout. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classdxl__hal}{dxl\+\_\+hal} \hyperlink{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}{d\+H}
\begin{DoxyCompactList}\small\item\em Conains the serial port comunication. \end{DoxyCompactList}\item 
unsigned char \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gb\+Instruction\+Packet} \mbox{[}M\+A\+X\+N\+U\+M\+\_\+\+T\+X\+P\+A\+C\+K\+E\+T\mbox{]} = \{0\}
\begin{DoxyCompactList}\small\item\em Contains all the instructions. \end{DoxyCompactList}\item 
unsigned char \hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gb\+Status\+Packet} \mbox{[}M\+A\+X\+N\+U\+M\+\_\+\+R\+X\+P\+A\+C\+K\+E\+T\mbox{]} = \{0\}
\begin{DoxyCompactList}\small\item\em Contains the status. \end{DoxyCompactList}\item 
unsigned int \hyperlink{classdynamixel_a333686e1b5903d16c41df8172b6bd5a8}{gb\+Rx\+Packet\+Length} = 0
\begin{DoxyCompactList}\small\item\em Received packet length. \end{DoxyCompactList}\item 
unsigned int \hyperlink{classdynamixel_a9d590ce24791d111c2db9b66be1e046d}{gb\+Rx\+Get\+Length} = 0
\begin{DoxyCompactList}\small\item\em Temporal length from the received packet. \end{DoxyCompactList}\item 
double \hyperlink{classdynamixel_a6c6314fb7070e6fd361e57c5de17e0ec}{gd\+Packet\+Start\+Time} = 0.\+0
\begin{DoxyCompactList}\small\item\em Packet start time. \end{DoxyCompactList}\item 
double \hyperlink{classdynamixel_a2173f25c6299da7ddb37ba3d2bf1f738}{gd\+Byte\+Trans\+Time} = 0.\+0
\begin{DoxyCompactList}\small\item\em Byte transmission time. \end{DoxyCompactList}\item 
double \hyperlink{classdynamixel_a9f47887864517d74955a2bc787ae4456}{gd\+Rcv\+Wait\+Time} = 0.\+0
\begin{DoxyCompactList}\small\item\em Receive wait time. \end{DoxyCompactList}\item 
int \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gb\+Comm\+Status} = C\+O\+M\+M\+\_\+\+R\+X\+S\+U\+C\+C\+E\+S\+S
\begin{DoxyCompactList}\small\item\em Current communication status. \end{DoxyCompactList}\item 
int \hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{gi\+Bus\+Using} = 0
\begin{DoxyCompactList}\small\item\em True if the bus if being used. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Dynamixel 1.\+0 protocol class. 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{classdynamixel_a5d4fed957a4b2d1690c0fa72127f5cbf}{}\index{dynamixel@{dynamixel}!dynamixel@{dynamixel}}
\index{dynamixel@{dynamixel}!dynamixel@{dynamixel}}
\subsubsection[{dynamixel}]{\setlength{\rightskip}{0pt plus 5cm}dynamixel\+::dynamixel (
\begin{DoxyParamCaption}
\item[{Q\+String}]{port\+\_\+num, }
\item[{int}]{baud\+\_\+rate = {\ttfamily 1000000}}
\end{DoxyParamCaption}
)}\label{classdynamixel_a5d4fed957a4b2d1690c0fa72127f5cbf}


Initialization constructor. 


\begin{DoxyCode}
00011 \{
00012     \hyperlink{classdynamixel_a87960244d5846ae7583e37d2407eb61e}{initialize}(port\_num, baud\_rate);
00013 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classdynamixel_a7554c7889896e29e11a62027d89f3fdf}{}\index{dynamixel@{dynamixel}!change\+\_\+baudrate@{change\+\_\+baudrate}}
\index{change\+\_\+baudrate@{change\+\_\+baudrate}!dynamixel@{dynamixel}}
\subsubsection[{change\+\_\+baudrate}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel\+::change\+\_\+baudrate (
\begin{DoxyParamCaption}
\item[{int}]{baud\+\_\+rate}
\end{DoxyParamCaption}
)}\label{classdynamixel_a7554c7889896e29e11a62027d89f3fdf}


Changes the current baud rate. 


\begin{DoxyCode}
00031 \{
00032     \textcolor{keywordtype}{int} result = 0;
00033     \textcolor{keywordtype}{float} baudrate = (float)baud\_rate;
00034     
00035     result = \hyperlink{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}{dH}.\hyperlink{classdxl__hal_a0eaaa5340bc9dce73cc920dc8befe5b0}{change\_baudrate}(baudrate);
00036     \textcolor{keywordflow}{if}(result == 1)
00037         \hyperlink{classdynamixel_a2173f25c6299da7ddb37ba3d2bf1f738}{gdByteTransTime} = 1000.0f / baudrate * 10.0; \textcolor{comment}{// 1000/baudrate(bit per msec) *
       10(start bit + data bit + stop bit)}
00038 
00039     \textcolor{keywordflow}{return} result;
00040 \}
\end{DoxyCode}
\hypertarget{classdynamixel_ac8440d5d34ae3c4618b28fdbbd748edc}{}\index{dynamixel@{dynamixel}!get\+\_\+comm\+\_\+result@{get\+\_\+comm\+\_\+result}}
\index{get\+\_\+comm\+\_\+result@{get\+\_\+comm\+\_\+result}!dynamixel@{dynamixel}}
\subsubsection[{get\+\_\+comm\+\_\+result}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel\+::get\+\_\+comm\+\_\+result (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classdynamixel_ac8440d5d34ae3c4618b28fdbbd748edc}


Returns the current com status. 


\begin{DoxyCode}
00112 \{ \textcolor{keywordflow}{return} \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus}; \}
\end{DoxyCode}
\hypertarget{classdynamixel_a2fa5375537184c279a9ebfcfc0425071}{}\index{dynamixel@{dynamixel}!get\+\_\+packet\+\_\+time@{get\+\_\+packet\+\_\+time}}
\index{get\+\_\+packet\+\_\+time@{get\+\_\+packet\+\_\+time}!dynamixel@{dynamixel}}
\subsubsection[{get\+\_\+packet\+\_\+time}]{\setlength{\rightskip}{0pt plus 5cm}double dynamixel\+::get\+\_\+packet\+\_\+time (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel_a2fa5375537184c279a9ebfcfc0425071}


Returns the packet time. 


\begin{DoxyCode}
00050 \{
00051     \textcolor{keywordtype}{double} elapsed\_time;
00052 
00053     elapsed\_time = (double)(\hyperlink{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}{dH}.\hyperlink{classdxl__hal_a6b6b7381c45308662fc3df6e7f74bc61}{get\_curr\_time}() - 
      \hyperlink{classdynamixel_a6c6314fb7070e6fd361e57c5de17e0ec}{gdPacketStartTime});
00054 
00055     \textcolor{comment}{// Overflow}
00056     \textcolor{keywordflow}{if}(elapsed\_time < 0) \hyperlink{classdynamixel_a6c6314fb7070e6fd361e57c5de17e0ec}{gdPacketStartTime} = \hyperlink{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}{dH}.\hyperlink{classdxl__hal_a6b6b7381c45308662fc3df6e7f74bc61}{get\_curr\_time}();
00057     
00058     \textcolor{keywordflow}{return} elapsed\_time;
00059 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a843b0aac721e4264e7e3097f80980243}{}\index{dynamixel@{dynamixel}!get\+\_\+rxpacket\+\_\+error@{get\+\_\+rxpacket\+\_\+error}}
\index{get\+\_\+rxpacket\+\_\+error@{get\+\_\+rxpacket\+\_\+error}!dynamixel@{dynamixel}}
\subsubsection[{get\+\_\+rxpacket\+\_\+error}]{\setlength{\rightskip}{0pt plus 5cm}bool dynamixel\+::get\+\_\+rxpacket\+\_\+error (
\begin{DoxyParamCaption}
\item[{int}]{error}
\end{DoxyParamCaption}
)}\label{classdynamixel_a843b0aac721e4264e7e3097f80980243}


Returns false if no receive error and true if there\textquotesingle{}s an error. 


\begin{DoxyParams}{Parameters}
{\em error} & Selects the error to check \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00271 \{
00272     \textcolor{keywordflow}{if}( \hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[PRT1\_PKT\_ERRBIT] & (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char})error )
00273         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00274 
00275     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00276 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a6e62341ef9f51b6e152e769bd7be9d75}{}\index{dynamixel@{dynamixel}!get\+\_\+rxpacket\+\_\+error\+\_\+byte@{get\+\_\+rxpacket\+\_\+error\+\_\+byte}}
\index{get\+\_\+rxpacket\+\_\+error\+\_\+byte@{get\+\_\+rxpacket\+\_\+error\+\_\+byte}!dynamixel@{dynamixel}}
\subsubsection[{get\+\_\+rxpacket\+\_\+error\+\_\+byte}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel\+::get\+\_\+rxpacket\+\_\+error\+\_\+byte (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel_a6e62341ef9f51b6e152e769bd7be9d75}


Returns the error byte. 


\begin{DoxyCode}
00279 \{
00280     \textcolor{keywordflow}{return} \hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[PRT1\_PKT\_ERRBIT];
00281 \}
\end{DoxyCode}
\hypertarget{classdynamixel_ae9cc18fdeda8329f68fa0f2f0a7a9aba}{}\index{dynamixel@{dynamixel}!get\+\_\+rxpacket\+\_\+length@{get\+\_\+rxpacket\+\_\+length}}
\index{get\+\_\+rxpacket\+\_\+length@{get\+\_\+rxpacket\+\_\+length}!dynamixel@{dynamixel}}
\subsubsection[{get\+\_\+rxpacket\+\_\+length}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel\+::get\+\_\+rxpacket\+\_\+length (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classdynamixel_ae9cc18fdeda8329f68fa0f2f0a7a9aba}


Returns the received packet length. 


\begin{DoxyCode}
00289 \{
00290     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})\hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[PRT1\_PKT\_LENGTH];
00291 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a68b5fa99719a9aec0734ecfb0635503b}{}\index{dynamixel@{dynamixel}!get\+\_\+rxpacket\+\_\+parameter@{get\+\_\+rxpacket\+\_\+parameter}}
\index{get\+\_\+rxpacket\+\_\+parameter@{get\+\_\+rxpacket\+\_\+parameter}!dynamixel@{dynamixel}}
\subsubsection[{get\+\_\+rxpacket\+\_\+parameter}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel\+::get\+\_\+rxpacket\+\_\+parameter (
\begin{DoxyParamCaption}
\item[{int}]{index}
\end{DoxyParamCaption}
)}\label{classdynamixel_a68b5fa99719a9aec0734ecfb0635503b}


Returns the received parameter. 


\begin{DoxyCode}
00284 \{
00285     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})\hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[PRT1\_PKT\_PARAMETER0+index];
00286 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a87960244d5846ae7583e37d2407eb61e}{}\index{dynamixel@{dynamixel}!initialize@{initialize}}
\index{initialize@{initialize}!dynamixel@{dynamixel}}
\subsubsection[{initialize}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel\+::initialize (
\begin{DoxyParamCaption}
\item[{Q\+String}]{port\+\_\+num, }
\item[{int}]{baud\+\_\+rate}
\end{DoxyParamCaption}
)}\label{classdynamixel_a87960244d5846ae7583e37d2407eb61e}


Initializates the port. 


\begin{DoxyCode}
00016 \{
00017     \textcolor{keywordflow}{if}( baud\_rate < 1900 ) \textcolor{keywordflow}{return} 0;
00018 
00019     \textcolor{keywordflow}{if}( not \hyperlink{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}{dH}.\hyperlink{classdxl__hal_ab631c2a5533125f14db9a8ec1c33aa7c}{open}(port\_num, baud\_rate) ) \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00020 
00021     \textcolor{comment}{// 1000/baudrate(bit per msec) * 10(start bit + data bit + stop bit)}
00022     \hyperlink{classdynamixel_a2173f25c6299da7ddb37ba3d2bf1f738}{gdByteTransTime} = 1000.0 / (double)baud\_rate * 10.0; 
00023 
00024     \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} = COMM\_RXSUCCESS;
00025     \hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing} = 0;
00026 
00027     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00028 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a00d08481ebc4dee19debecf43f888522}{}\index{dynamixel@{dynamixel}!is\+\_\+packet\+\_\+timeout@{is\+\_\+packet\+\_\+timeout}}
\index{is\+\_\+packet\+\_\+timeout@{is\+\_\+packet\+\_\+timeout}!dynamixel@{dynamixel}}
\subsubsection[{is\+\_\+packet\+\_\+timeout}]{\setlength{\rightskip}{0pt plus 5cm}bool dynamixel\+::is\+\_\+packet\+\_\+timeout (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel_a00d08481ebc4dee19debecf43f888522}


Returns true if the packet is timeout. 

\begin{DoxyReturn}{Returns}
True if the packet is timeout 
\end{DoxyReturn}

\begin{DoxyCode}
00074 \{
00075     \textcolor{keywordflow}{if}(this->\hyperlink{classdynamixel_a2fa5375537184c279a9ebfcfc0425071}{get\_packet\_time}() > \hyperlink{classdynamixel_a9f47887864517d74955a2bc787ae4456}{gdRcvWaitTime})
00076         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00077     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00078 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a5ae4b2c6eb4c91f404f973ee8e6a1914}{}\index{dynamixel@{dynamixel}!is\+Open@{is\+Open}}
\index{is\+Open@{is\+Open}!dynamixel@{dynamixel}}
\subsubsection[{is\+Open}]{\setlength{\rightskip}{0pt plus 5cm}bool dynamixel\+::is\+Open (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classdynamixel_a5ae4b2c6eb4c91f404f973ee8e6a1914}


True if the port is open. 


\begin{DoxyCode}
00100 \{ \textcolor{keywordflow}{return} \hyperlink{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}{dH}.\hyperlink{classdxl__hal_a88bba601b5c9f285fcdc14e18a1f3398}{isOpen}(); \}
\end{DoxyCode}
\hypertarget{classdynamixel_af2bd714423e7c4fc089762805c0c71f3}{}\index{dynamixel@{dynamixel}!ping@{ping}}
\index{ping@{ping}!dynamixel@{dynamixel}}
\subsubsection[{ping}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel\+::ping (
\begin{DoxyParamCaption}
\item[{int}]{id}
\end{DoxyParamCaption}
)}\label{classdynamixel_af2bd714423e7c4fc089762805c0c71f3}


Ping to the selected id, check com status for the ping result. 


\begin{DoxyParams}{Parameters}
{\em id} & I\+D where the ping is done \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00294 \{
00295     \textcolor{keywordflow}{while}(\hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing});
00296 
00297     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_ID] = (\textcolor{keywordtype}{unsigned} char)\textcolor{keywordtype}{id};
00298     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_INSTRUCTION] = INST\_PING;
00299     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_LENGTH] = 2;
00300     
00301     \hyperlink{classdynamixel_aebfc569c6b1eb0b98f8c385f0f921fc0}{txrx\_packet}();
00302 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a888404b41c4c4395a0b745c77ff2cea9}{}\index{dynamixel@{dynamixel}!read\+\_\+byte@{read\+\_\+byte}}
\index{read\+\_\+byte@{read\+\_\+byte}!dynamixel@{dynamixel}}
\subsubsection[{read\+\_\+byte}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel\+::read\+\_\+byte (
\begin{DoxyParamCaption}
\item[{int}]{id, }
\item[{int}]{address}
\end{DoxyParamCaption}
)}\label{classdynamixel_a888404b41c4c4395a0b745c77ff2cea9}


Reads a byte from the selected I\+D at the selected address. 


\begin{DoxyParams}{Parameters}
{\em id} & Selects the I\+D to read the byte \\
\hline
{\em address} & Selects the address to read the byte \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00305 \{
00306     \textcolor{keywordflow}{while}(\hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing});
00307 
00308     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_ID] = (\textcolor{keywordtype}{unsigned} char)\textcolor{keywordtype}{id};
00309     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_INSTRUCTION] = INST\_READ;
00310     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_PARAMETER0+0] = (\textcolor{keywordtype}{unsigned} char)address;
00311     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_PARAMETER0+1] = 1;
00312     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_LENGTH] = 4;
00313     
00314     \hyperlink{classdynamixel_aebfc569c6b1eb0b98f8c385f0f921fc0}{txrx\_packet}();
00315 
00316     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})\hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[PRT1\_PKT\_PARAMETER0];
00317 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a45e99341e82c5114f6e829c9141bf96f}{}\index{dynamixel@{dynamixel}!read\+\_\+word@{read\+\_\+word}}
\index{read\+\_\+word@{read\+\_\+word}!dynamixel@{dynamixel}}
\subsubsection[{read\+\_\+word}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel\+::read\+\_\+word (
\begin{DoxyParamCaption}
\item[{int}]{id, }
\item[{int}]{address}
\end{DoxyParamCaption}
)}\label{classdynamixel_a45e99341e82c5114f6e829c9141bf96f}


Reads a word to the selected I\+D at the selected address. 


\begin{DoxyParams}{Parameters}
{\em id} & Selects the I\+D to read the word \\
\hline
{\em address} & Selects the address to read the word \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00333 \{
00334     \textcolor{keywordflow}{while}(\hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing});
00335 
00336     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_ID] = (\textcolor{keywordtype}{unsigned} char)\textcolor{keywordtype}{id};
00337     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_INSTRUCTION] = INST\_READ;
00338     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_PARAMETER0+0] = (\textcolor{keywordtype}{unsigned} char)address;
00339     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_PARAMETER0+1] = 2;
00340     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_LENGTH] = 4;
00341     
00342     \hyperlink{classdynamixel_aebfc569c6b1eb0b98f8c385f0f921fc0}{txrx\_packet}();
00343 
00344     \textcolor{keywordflow}{return} MAKEWORD((\textcolor{keywordtype}{int})\hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[PRT1\_PKT\_PARAMETER0+0], (\textcolor{keywordtype}{int})
      \hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[PRT1\_PKT\_PARAMETER0+1]);
00345 \}
\end{DoxyCode}
\hypertarget{classdynamixel_aa26d2d2dff768563a1cb1480aa061608}{}\index{dynamixel@{dynamixel}!rx\+\_\+packet@{rx\+\_\+packet}}
\index{rx\+\_\+packet@{rx\+\_\+packet}!dynamixel@{dynamixel}}
\subsubsection[{rx\+\_\+packet}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel\+::rx\+\_\+packet (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel_aa26d2d2dff768563a1cb1480aa061608}


Receives a packet. 


\begin{DoxyCode}
00144 \{
00145     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} i = 0, j = 0, nRead = 0;
00146     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} checksum = 0;
00147 
00148     \textcolor{keywordflow}{if}( \hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing} == 0 )
00149         \textcolor{keywordflow}{return};
00150 
00151     \textcolor{keywordflow}{if}( \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_ID] == BROADCAST\_ID )
00152     \{
00153         \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} = COMM\_RXSUCCESS;
00154         \hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing} = 0;
00155         \textcolor{keywordflow}{return};
00156     \}
00157     
00158     \textcolor{keywordflow}{if}( \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} == COMM\_TXSUCCESS )
00159     \{
00160         \hyperlink{classdynamixel_a9d590ce24791d111c2db9b66be1e046d}{gbRxGetLength} = 0;
00161         \textcolor{comment}{//gbRxPacketLength = 6; //minimum wait length}
00162     \}
00163     
00164     \textcolor{keywordflow}{while}(1)
00165     \{
00166         nRead = \hyperlink{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}{dH}.\hyperlink{classdxl__hal_ac36331febb2eaa66303af3483795742a}{read}( &\hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[\hyperlink{classdynamixel_a9d590ce24791d111c2db9b66be1e046d}{gbRxGetLength}], 
      \hyperlink{classdynamixel_a333686e1b5903d16c41df8172b6bd5a8}{gbRxPacketLength} - gbRxGetLength );
00167         gbRxGetLength += nRead;
00168 
00169         \textcolor{keywordflow}{if}(gbRxGetLength > 4)
00170             \hyperlink{classdynamixel_a333686e1b5903d16c41df8172b6bd5a8}{gbRxPacketLength} = \hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[PRT1\_PKT\_LENGTH] + 4;
00171 
00172         \textcolor{keywordflow}{if}( gbRxGetLength < \hyperlink{classdynamixel_a333686e1b5903d16c41df8172b6bd5a8}{gbRxPacketLength} )
00173         \{
00174             \textcolor{keywordflow}{if}( \hyperlink{classdynamixel_a00d08481ebc4dee19debecf43f888522}{is\_packet\_timeout}() == 1 )
00175             \{
00176                 \textcolor{keywordflow}{if}(gbRxGetLength == 0)
00177                     \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} = COMM\_RXTIMEOUT;
00178                 \textcolor{keywordflow}{else}
00179                     \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} = COMM\_RXCORRUPT;
00180                 \hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing} = 0;
00181                 \textcolor{keywordflow}{return};
00182             \}
00183             \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} = COMM\_RXWAITING;
00184             \textcolor{comment}{//return;           }
00185         \}
00186         \textcolor{keywordflow}{else}
00187         \{
00188             \textcolor{keywordflow}{break};
00189         \}
00190     \}
00191 
00192     \textcolor{comment}{// Find packet header}
00193     \textcolor{keywordflow}{for}( i=0; i<(gbRxGetLength-1); i++ )
00194     \{
00195         \textcolor{keywordflow}{if}( \hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[i] == 0xff && \hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[i+1] == 0xff )
00196             \textcolor{keywordflow}{break};
00197         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( i == gbRxGetLength-2 && \hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[gbRxGetLength-1] == 0xff )
00198             \textcolor{keywordflow}{break};
00199         \textcolor{keywordflow}{else} \{
00200             \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} = COMM\_RXCORRUPT;
00201             \textcolor{keywordflow}{return};
00202         \}
00203     \}
00204 
00205     \textcolor{keywordflow}{if}( i > 0 )
00206     \{
00207         \textcolor{keywordflow}{for}( j=0; j<(gbRxGetLength-i); j++ )
00208             \hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[j] = \hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[j + i];
00209             
00210         gbRxGetLength -= i;     
00211     \}
00212 
00213     \textcolor{comment}{// Check id pairing}
00214     \textcolor{keywordflow}{if}( \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_ID] != \hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[PRT1\_PKT\_ID])
00215     \{
00216         \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} = COMM\_RXCORRUPT;
00217         \hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing} = 0;
00218         \textcolor{keywordflow}{return};
00219     \}
00220     
00221     \textcolor{comment}{// Check checksum}
00222     \textcolor{keywordflow}{for}( i=0; i<(\hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[PRT1\_PKT\_LENGTH]+1); i++ )
00223         checksum += \hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[i+2];
00224     checksum = ~checksum;
00225 
00226     \textcolor{keywordflow}{if}( \hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[\hyperlink{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{gbStatusPacket}[PRT1\_PKT\_LENGTH]+3] != checksum )
00227     \{
00228         \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} = COMM\_RXCORRUPT;
00229         \hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing} = 0;
00230         \textcolor{keywordflow}{return};
00231     \}
00232     
00233     \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} = COMM\_RXSUCCESS;
00234     \hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing} = 0;
00235 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a067f82c21ed176e18fa224d16f3d1c5b}{}\index{dynamixel@{dynamixel}!set\+\_\+packet\+\_\+timeout@{set\+\_\+packet\+\_\+timeout}}
\index{set\+\_\+packet\+\_\+timeout@{set\+\_\+packet\+\_\+timeout}!dynamixel@{dynamixel}}
\subsubsection[{set\+\_\+packet\+\_\+timeout}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel\+::set\+\_\+packet\+\_\+timeout (
\begin{DoxyParamCaption}
\item[{int}]{Num\+Rcv\+Byte}
\end{DoxyParamCaption}
)}\label{classdynamixel_a067f82c21ed176e18fa224d16f3d1c5b}


Sets the timeout in number of received bytes. 


\begin{DoxyParams}{Parameters}
{\em Num\+Rcv\+Byte} & Number of received bytes to do a timeout \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00062 \{
00063     \hyperlink{classdynamixel_a6c6314fb7070e6fd361e57c5de17e0ec}{gdPacketStartTime} = \hyperlink{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}{dH}.\hyperlink{classdxl__hal_a6b6b7381c45308662fc3df6e7f74bc61}{get\_curr\_time}();
00064     \hyperlink{classdynamixel_a9f47887864517d74955a2bc787ae4456}{gdRcvWaitTime} = (\hyperlink{classdynamixel_a2173f25c6299da7ddb37ba3d2bf1f738}{gdByteTransTime}*(double)NumRcvByte + 2.0*LATENCY\_TIME + 2.
      0);
00065 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a125b42f776c4aac520f274074f68b591}{}\index{dynamixel@{dynamixel}!set\+\_\+packet\+\_\+timeout\+\_\+ms@{set\+\_\+packet\+\_\+timeout\+\_\+ms}}
\index{set\+\_\+packet\+\_\+timeout\+\_\+ms@{set\+\_\+packet\+\_\+timeout\+\_\+ms}!dynamixel@{dynamixel}}
\subsubsection[{set\+\_\+packet\+\_\+timeout\+\_\+ms}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel\+::set\+\_\+packet\+\_\+timeout\+\_\+ms (
\begin{DoxyParamCaption}
\item[{int}]{msec}
\end{DoxyParamCaption}
)}\label{classdynamixel_a125b42f776c4aac520f274074f68b591}


Sets the timeout in ms. 


\begin{DoxyParams}{Parameters}
{\em msec} & Miliseconds for the timeout \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00068 \{
00069     \hyperlink{classdynamixel_a6c6314fb7070e6fd361e57c5de17e0ec}{gdPacketStartTime} = \hyperlink{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}{dH}.\hyperlink{classdxl__hal_a6b6b7381c45308662fc3df6e7f74bc61}{get\_curr\_time}();
00070     \hyperlink{classdynamixel_a9f47887864517d74955a2bc787ae4456}{gdRcvWaitTime} = (double)msec;
00071 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a84e24c72c3e5be866f8b28c2e5bd1d95}{}\index{dynamixel@{dynamixel}!set\+\_\+txpacket\+\_\+id@{set\+\_\+txpacket\+\_\+id}}
\index{set\+\_\+txpacket\+\_\+id@{set\+\_\+txpacket\+\_\+id}!dynamixel@{dynamixel}}
\subsubsection[{set\+\_\+txpacket\+\_\+id}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel\+::set\+\_\+txpacket\+\_\+id (
\begin{DoxyParamCaption}
\item[{int}]{id}
\end{DoxyParamCaption}
)}\label{classdynamixel_a84e24c72c3e5be866f8b28c2e5bd1d95}


Sets the sending packet I\+D. 


\begin{DoxyCode}
00250 \{
00251     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_ID] = (\textcolor{keywordtype}{unsigned} char)\textcolor{keywordtype}{id};
00252 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a209a43f983f214323b6f0a627d5e8c13}{}\index{dynamixel@{dynamixel}!set\+\_\+txpacket\+\_\+instruction@{set\+\_\+txpacket\+\_\+instruction}}
\index{set\+\_\+txpacket\+\_\+instruction@{set\+\_\+txpacket\+\_\+instruction}!dynamixel@{dynamixel}}
\subsubsection[{set\+\_\+txpacket\+\_\+instruction}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel\+::set\+\_\+txpacket\+\_\+instruction (
\begin{DoxyParamCaption}
\item[{int}]{instruction}
\end{DoxyParamCaption}
)}\label{classdynamixel_a209a43f983f214323b6f0a627d5e8c13}


Sets the sending packet instruction. 


\begin{DoxyCode}
00255 \{
00256     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_INSTRUCTION] = (\textcolor{keywordtype}{unsigned} char)instruction;
00257 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a829278f48e21c810b172eb8cab3b86de}{}\index{dynamixel@{dynamixel}!set\+\_\+txpacket\+\_\+length@{set\+\_\+txpacket\+\_\+length}}
\index{set\+\_\+txpacket\+\_\+length@{set\+\_\+txpacket\+\_\+length}!dynamixel@{dynamixel}}
\subsubsection[{set\+\_\+txpacket\+\_\+length}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel\+::set\+\_\+txpacket\+\_\+length (
\begin{DoxyParamCaption}
\item[{int}]{length}
\end{DoxyParamCaption}
)}\label{classdynamixel_a829278f48e21c810b172eb8cab3b86de}


Sets the sending packet length. 


\begin{DoxyCode}
00266 \{
00267     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_LENGTH] = (\textcolor{keywordtype}{unsigned} char)length;
00268 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a2c3d31bbbed70a69918e9972a620384b}{}\index{dynamixel@{dynamixel}!set\+\_\+txpacket\+\_\+parameter@{set\+\_\+txpacket\+\_\+parameter}}
\index{set\+\_\+txpacket\+\_\+parameter@{set\+\_\+txpacket\+\_\+parameter}!dynamixel@{dynamixel}}
\subsubsection[{set\+\_\+txpacket\+\_\+parameter}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel\+::set\+\_\+txpacket\+\_\+parameter (
\begin{DoxyParamCaption}
\item[{int}]{index, }
\item[{int}]{value}
\end{DoxyParamCaption}
)}\label{classdynamixel_a2c3d31bbbed70a69918e9972a620384b}


Sets the sending packet parameter. 


\begin{DoxyCode}
00260 \{
00261     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_PARAMETER0+index] = (\textcolor{keywordtype}{unsigned} char)value;
00262 
00263 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a92ea074ed1c1a9cf29e039f8c425f01a}{}\index{dynamixel@{dynamixel}!terminate@{terminate}}
\index{terminate@{terminate}!dynamixel@{dynamixel}}
\subsubsection[{terminate}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel\+::terminate (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel_a92ea074ed1c1a9cf29e039f8c425f01a}


Closes the comunication. 


\begin{DoxyCode}
00043 \{
00044     \hyperlink{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}{dH}.\hyperlink{classdxl__hal_a250fd7e4acabf54d0733551a13e89a2d}{close}();
00045     \textcolor{keywordflow}{return} 0;
00046 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a479187cd8940c16dd4374eb5be22b888}{}\index{dynamixel@{dynamixel}!tx\+\_\+packet@{tx\+\_\+packet}}
\index{tx\+\_\+packet@{tx\+\_\+packet}!dynamixel@{dynamixel}}
\subsubsection[{tx\+\_\+packet}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel\+::tx\+\_\+packet (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel_a479187cd8940c16dd4374eb5be22b888}


Sends a packet. 


\begin{DoxyCode}
00082 \{
00083     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} pkt\_idx = 0;
00084     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} TxNumByte, RealTxNumByte;
00085     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} checksum = 0;
00086 
00087     \textcolor{keywordflow}{if}( \hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing} == 1 )
00088     \{
00089         \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} = COMM\_TXFAIL;
00090         \textcolor{keywordflow}{return};
00091     \}
00092     
00093     \hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing} = 1;
00094     
00095     \textcolor{keywordflow}{if}( \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_INSTRUCTION] != INST\_PING
00096         && \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_INSTRUCTION] != INST\_READ
00097         && \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_INSTRUCTION] != INST\_WRITE
00098         && \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_INSTRUCTION] != INST\_REG\_WRITE
00099         && \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_INSTRUCTION] != INST\_ACTION
00100         && \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_INSTRUCTION] != INST\_RESET
00101         && \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_INSTRUCTION] != INST\_SYNC\_WRITE )
00102     \{
00103         \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} = COMM\_TXERROR;
00104         \hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing} = 0;
00105         \textcolor{keywordflow}{return};
00106     \}
00107     
00108     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[0] = 0xff;
00109     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[1] = 0xff;
00110     \textcolor{keywordflow}{for}( pkt\_idx = 0; pkt\_idx < (\hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_LENGTH]+1); pkt\_idx++ )
00111         checksum += \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[pkt\_idx+2];
00112     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[\hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_LENGTH]+3] = ~
      checksum;
00113     
00114     \textcolor{comment}{//if( gbCommStatus == COMM\_RXTIMEOUT || gbCommStatus == COMM\_RXCORRUPT )}
00115     \textcolor{comment}{//  dH.clear();}
00116 
00117     \hyperlink{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}{dH}.\hyperlink{classdxl__hal_a004eedde5af69219d7288ec8ea97c89f}{clear}();
00118 
00119     TxNumByte = gbInstructionPacket[PRT1\_PKT\_LENGTH] + 4;
00120     RealTxNumByte = \hyperlink{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}{dH}.\hyperlink{classdxl__hal_a90106970438fb0ab65852730a1c0776a}{write}( gbInstructionPacket, TxNumByte );
00121 
00122     \textcolor{keywordflow}{if}( TxNumByte != RealTxNumByte )
00123     \{
00124         \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} = COMM\_TXFAIL;
00125         \hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing} = 0;
00126         \textcolor{keywordflow}{return};
00127     \}
00128 
00129     \textcolor{keywordflow}{if}( gbInstructionPacket[PRT1\_PKT\_INSTRUCTION] == INST\_READ )
00130     \{
00131         \hyperlink{classdynamixel_a333686e1b5903d16c41df8172b6bd5a8}{gbRxPacketLength} =  gbInstructionPacket[PRT1\_PKT\_PARAMETER0+1] + 6;
00132         \hyperlink{classdynamixel_a067f82c21ed176e18fa224d16f3d1c5b}{set\_packet\_timeout}( gbInstructionPacket[PRT1\_PKT\_PARAMETER0+1] + 6 );
00133     \}
00134     \textcolor{keywordflow}{else}
00135     \{
00136         \hyperlink{classdynamixel_a333686e1b5903d16c41df8172b6bd5a8}{gbRxPacketLength} = 6;
00137         \hyperlink{classdynamixel_a067f82c21ed176e18fa224d16f3d1c5b}{set\_packet\_timeout}( 6 );
00138     \}
00139 
00140     \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} = COMM\_TXSUCCESS;
00141 \}
\end{DoxyCode}
\hypertarget{classdynamixel_aebfc569c6b1eb0b98f8c385f0f921fc0}{}\index{dynamixel@{dynamixel}!txrx\+\_\+packet@{txrx\+\_\+packet}}
\index{txrx\+\_\+packet@{txrx\+\_\+packet}!dynamixel@{dynamixel}}
\subsubsection[{txrx\+\_\+packet}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel\+::txrx\+\_\+packet (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel_aebfc569c6b1eb0b98f8c385f0f921fc0}


Sends and receives a packet. 


\begin{DoxyCode}
00238 \{
00239     \hyperlink{classdynamixel_a479187cd8940c16dd4374eb5be22b888}{tx\_packet}();
00240 
00241     \textcolor{keywordflow}{if}( \hyperlink{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{gbCommStatus} != COMM\_TXSUCCESS )
00242         \textcolor{keywordflow}{return}; 
00243     
00244     
00245     \hyperlink{classdynamixel_aa26d2d2dff768563a1cb1480aa061608}{rx\_packet}();
00246 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a66c1e32cc45dd46d329f1fc212e46a3d}{}\index{dynamixel@{dynamixel}!write\+\_\+byte@{write\+\_\+byte}}
\index{write\+\_\+byte@{write\+\_\+byte}!dynamixel@{dynamixel}}
\subsubsection[{write\+\_\+byte}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel\+::write\+\_\+byte (
\begin{DoxyParamCaption}
\item[{int}]{id, }
\item[{int}]{address, }
\item[{int}]{value}
\end{DoxyParamCaption}
)}\label{classdynamixel_a66c1e32cc45dd46d329f1fc212e46a3d}


Writes a byte to the selected I\+D at the selected address. 


\begin{DoxyParams}{Parameters}
{\em id} & Selects the I\+D to write the byte \\
\hline
{\em address} & Selects the address to write the byte \\
\hline
{\em value} & Value to set at the selected location \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00320 \{
00321     \textcolor{keywordflow}{while}(\hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing});
00322 
00323     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_ID] = (\textcolor{keywordtype}{unsigned} char)\textcolor{keywordtype}{id};
00324     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_INSTRUCTION] = INST\_WRITE;
00325     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_PARAMETER0+0] = (\textcolor{keywordtype}{unsigned} char)address;
00326     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_PARAMETER0+1] = (\textcolor{keywordtype}{unsigned} char)value;
00327     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_LENGTH] = 4;
00328     
00329     \hyperlink{classdynamixel_aebfc569c6b1eb0b98f8c385f0f921fc0}{txrx\_packet}();
00330 \}
\end{DoxyCode}
\hypertarget{classdynamixel_a925f62ce5e261e5ef4fe6dc46bdc7c63}{}\index{dynamixel@{dynamixel}!write\+\_\+word@{write\+\_\+word}}
\index{write\+\_\+word@{write\+\_\+word}!dynamixel@{dynamixel}}
\subsubsection[{write\+\_\+word}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel\+::write\+\_\+word (
\begin{DoxyParamCaption}
\item[{int}]{id, }
\item[{int}]{address, }
\item[{int}]{value}
\end{DoxyParamCaption}
)}\label{classdynamixel_a925f62ce5e261e5ef4fe6dc46bdc7c63}


Writes a word to the selected I\+D at the selected address. 


\begin{DoxyParams}{Parameters}
{\em id} & Selects the I\+D to write the word \\
\hline
{\em address} & Selects the address to write the word \\
\hline
{\em value} & Value to set at the selected location \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00348 \{
00349     \textcolor{keywordflow}{while}(\hyperlink{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{giBusUsing});
00350 
00351     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_ID] = (\textcolor{keywordtype}{unsigned} char)\textcolor{keywordtype}{id};
00352     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_INSTRUCTION] = INST\_WRITE;
00353     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_PARAMETER0+0] = (\textcolor{keywordtype}{unsigned} char)address;
00354     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_PARAMETER0+1] = (\textcolor{keywordtype}{unsigned} char)LOBYTE(value);
00355     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_PARAMETER0+2] = (\textcolor{keywordtype}{unsigned} char)HIBYTE(value);
00356     \hyperlink{classdynamixel_afd94dcf01b8e96298727776e222de722}{gbInstructionPacket}[PRT1\_PKT\_LENGTH] = 5;
00357     
00358     \hyperlink{classdynamixel_aebfc569c6b1eb0b98f8c385f0f921fc0}{txrx\_packet}();
00359 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}{}\index{dynamixel@{dynamixel}!d\+H@{d\+H}}
\index{d\+H@{d\+H}!dynamixel@{dynamixel}}
\subsubsection[{d\+H}]{\setlength{\rightskip}{0pt plus 5cm}{\bf dxl\+\_\+hal} dynamixel\+::d\+H\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel_ae003cc90ada6d7b70eaa4ea9d42d4deb}


Conains the serial port comunication. 

\hypertarget{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}{}\index{dynamixel@{dynamixel}!gb\+Comm\+Status@{gb\+Comm\+Status}}
\index{gb\+Comm\+Status@{gb\+Comm\+Status}!dynamixel@{dynamixel}}
\subsubsection[{gb\+Comm\+Status}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel\+::gb\+Comm\+Status = C\+O\+M\+M\+\_\+\+R\+X\+S\+U\+C\+C\+E\+S\+S\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel_a5b603f6bed7ccc595f1f50bd6a6ebbfc}


Current communication status. 

\hypertarget{classdynamixel_afd94dcf01b8e96298727776e222de722}{}\index{dynamixel@{dynamixel}!gb\+Instruction\+Packet@{gb\+Instruction\+Packet}}
\index{gb\+Instruction\+Packet@{gb\+Instruction\+Packet}!dynamixel@{dynamixel}}
\subsubsection[{gb\+Instruction\+Packet}]{\setlength{\rightskip}{0pt plus 5cm}unsigned char dynamixel\+::gb\+Instruction\+Packet\mbox{[}M\+A\+X\+N\+U\+M\+\_\+\+T\+X\+P\+A\+C\+K\+E\+T\mbox{]} = \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel_afd94dcf01b8e96298727776e222de722}


Contains all the instructions. 

\hypertarget{classdynamixel_a9d590ce24791d111c2db9b66be1e046d}{}\index{dynamixel@{dynamixel}!gb\+Rx\+Get\+Length@{gb\+Rx\+Get\+Length}}
\index{gb\+Rx\+Get\+Length@{gb\+Rx\+Get\+Length}!dynamixel@{dynamixel}}
\subsubsection[{gb\+Rx\+Get\+Length}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int dynamixel\+::gb\+Rx\+Get\+Length = 0\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel_a9d590ce24791d111c2db9b66be1e046d}


Temporal length from the received packet. 

\hypertarget{classdynamixel_a333686e1b5903d16c41df8172b6bd5a8}{}\index{dynamixel@{dynamixel}!gb\+Rx\+Packet\+Length@{gb\+Rx\+Packet\+Length}}
\index{gb\+Rx\+Packet\+Length@{gb\+Rx\+Packet\+Length}!dynamixel@{dynamixel}}
\subsubsection[{gb\+Rx\+Packet\+Length}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int dynamixel\+::gb\+Rx\+Packet\+Length = 0\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel_a333686e1b5903d16c41df8172b6bd5a8}


Received packet length. 

\hypertarget{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}{}\index{dynamixel@{dynamixel}!gb\+Status\+Packet@{gb\+Status\+Packet}}
\index{gb\+Status\+Packet@{gb\+Status\+Packet}!dynamixel@{dynamixel}}
\subsubsection[{gb\+Status\+Packet}]{\setlength{\rightskip}{0pt plus 5cm}unsigned char dynamixel\+::gb\+Status\+Packet\mbox{[}M\+A\+X\+N\+U\+M\+\_\+\+R\+X\+P\+A\+C\+K\+E\+T\mbox{]} = \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel_aa57c86d3bbbeaf5c9d4f6bd00376b04f}


Contains the status. 

\hypertarget{classdynamixel_a2173f25c6299da7ddb37ba3d2bf1f738}{}\index{dynamixel@{dynamixel}!gd\+Byte\+Trans\+Time@{gd\+Byte\+Trans\+Time}}
\index{gd\+Byte\+Trans\+Time@{gd\+Byte\+Trans\+Time}!dynamixel@{dynamixel}}
\subsubsection[{gd\+Byte\+Trans\+Time}]{\setlength{\rightskip}{0pt plus 5cm}double dynamixel\+::gd\+Byte\+Trans\+Time = 0.\+0\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel_a2173f25c6299da7ddb37ba3d2bf1f738}


Byte transmission time. 

\hypertarget{classdynamixel_a6c6314fb7070e6fd361e57c5de17e0ec}{}\index{dynamixel@{dynamixel}!gd\+Packet\+Start\+Time@{gd\+Packet\+Start\+Time}}
\index{gd\+Packet\+Start\+Time@{gd\+Packet\+Start\+Time}!dynamixel@{dynamixel}}
\subsubsection[{gd\+Packet\+Start\+Time}]{\setlength{\rightskip}{0pt plus 5cm}double dynamixel\+::gd\+Packet\+Start\+Time = 0.\+0\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel_a6c6314fb7070e6fd361e57c5de17e0ec}


Packet start time. 

\hypertarget{classdynamixel_a9f47887864517d74955a2bc787ae4456}{}\index{dynamixel@{dynamixel}!gd\+Rcv\+Wait\+Time@{gd\+Rcv\+Wait\+Time}}
\index{gd\+Rcv\+Wait\+Time@{gd\+Rcv\+Wait\+Time}!dynamixel@{dynamixel}}
\subsubsection[{gd\+Rcv\+Wait\+Time}]{\setlength{\rightskip}{0pt plus 5cm}double dynamixel\+::gd\+Rcv\+Wait\+Time = 0.\+0\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel_a9f47887864517d74955a2bc787ae4456}


Receive wait time. 

\hypertarget{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}{}\index{dynamixel@{dynamixel}!gi\+Bus\+Using@{gi\+Bus\+Using}}
\index{gi\+Bus\+Using@{gi\+Bus\+Using}!dynamixel@{dynamixel}}
\subsubsection[{gi\+Bus\+Using}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel\+::gi\+Bus\+Using = 0\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel_ad10e0e49f5fef04bf789a89c14cc470a}


True if the bus if being used. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
dxl/\hyperlink{dynamixel_8h}{dynamixel.\+h}\item 
dxl/\hyperlink{dynamixel_8cpp}{dynamixel.\+cpp}\end{DoxyCompactItemize}
