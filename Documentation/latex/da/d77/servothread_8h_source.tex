\hypertarget{servothread_8h_source}{}\section{servothread.\+h}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#ifndef SERVOTHREAD\_H}
00003 \textcolor{preprocessor}{#define SERVOTHREAD\_H}
00004 
00005 \textcolor{comment}{// Qt Libraries}
00006 \textcolor{preprocessor}{#include <QDebug>}
00007 \textcolor{preprocessor}{#include <QDir>}
00008 \textcolor{preprocessor}{#include <QMutex>}
00009 \textcolor{preprocessor}{#include <QThread>}
00010 \textcolor{preprocessor}{#include <QVector>}
00011 \textcolor{preprocessor}{#include <QWaitCondition>}
00012 
00013 \textcolor{comment}{// Other libraries}
00014 \textcolor{preprocessor}{#include <xjoystick.h>}
00015 
00016 \textcolor{comment}{// User libraries}
00017 \textcolor{preprocessor}{#include "\hyperlink{ax12_8h}{dxl/ax12.h}"}
00018 
\hypertarget{servothread_8h_source_l00021}{}\hyperlink{class_servo_thread}{00021} \textcolor{keyword}{class }\hyperlink{class_servo_thread}{ServoThread} : \textcolor{keyword}{public} QThread
00022 \{
00023     Q\_OBJECT
00024     
\hypertarget{servothread_8h_source_l00025}{}\hyperlink{class_servo_thread_aeccce0ac6a969e2ee7cbe91687e2d085}{00025}     \textcolor{keyword}{enum} \hyperlink{class_servo_thread_aeccce0ac6a969e2ee7cbe91687e2d085}{Version} 
00026     \{
\hypertarget{servothread_8h_source_l00027}{}\hyperlink{class_servo_thread_aeccce0ac6a969e2ee7cbe91687e2d085a319b6bf2cb120faeefbd0a5118ece7e3}{00027}         \hyperlink{class_servo_thread_aeccce0ac6a969e2ee7cbe91687e2d085a319b6bf2cb120faeefbd0a5118ece7e3}{v\_1\_0}
00028     \};
00029     
00030 \textcolor{keyword}{public}:
00031     
\hypertarget{servothread_8h_source_l00033}{}\hyperlink{struct_servo_thread_1_1_servo}{00033}     \textcolor{keyword}{struct }\hyperlink{struct_servo_thread_1_1_servo}{Servo} 
00034     \{
\hypertarget{servothread_8h_source_l00035}{}\hyperlink{struct_servo_thread_1_1_servo_a06b514c42113aa85fd1703fc88fca7ce}{00035}         \textcolor{keywordtype}{int} \hyperlink{struct_servo_thread_1_1_servo_a06b514c42113aa85fd1703fc88fca7ce}{ID};         
\hypertarget{servothread_8h_source_l00036}{}\hyperlink{struct_servo_thread_1_1_servo_ae378d77acf16b306649c87fdb8df677e}{00036}         \textcolor{keywordtype}{double} \hyperlink{struct_servo_thread_1_1_servo_ae378d77acf16b306649c87fdb8df677e}{load};    
\hypertarget{servothread_8h_source_l00037}{}\hyperlink{struct_servo_thread_1_1_servo_a9fa0aa56944b9b0bb9d66303d5bd4b59}{00037}         \textcolor{keywordtype}{double} \hyperlink{struct_servo_thread_1_1_servo_a9fa0aa56944b9b0bb9d66303d5bd4b59}{pos};     
00038         
\hypertarget{servothread_8h_source_l00040}{}\hyperlink{struct_servo_thread_1_1_servo_a031c8e78df1e5eddf80bd2b2e2998658}{00040}         \hyperlink{struct_servo_thread_1_1_servo_a031c8e78df1e5eddf80bd2b2e2998658}{Servo}(\textcolor{keywordtype}{int} ID = -1, \textcolor{keywordtype}{double} load = -1, \textcolor{keywordtype}{double} pos = -1) 
00041             : ID(ID), load(load), pos(pos) \{\}
00042         
\hypertarget{servothread_8h_source_l00044}{}\hyperlink{struct_servo_thread_1_1_servo_ad5caa6903df672ae7a5ac0f3fb301e23}{00044}         \hyperlink{struct_servo_thread_1_1_servo_ad5caa6903df672ae7a5ac0f3fb301e23}{Servo}(\hyperlink{struct_servo_thread_1_1_servo}{Servo} &s) : ID(s.ID), load(s.load), pos(s.pos) \{\}
00045     \};
00046     
\hypertarget{servothread_8h_source_l00048}{}\hyperlink{class_servo_thread_a8d581034e60792a9995d44065f6140a5}{00048}     \textcolor{keyword}{enum} \hyperlink{class_servo_thread_a8d581034e60792a9995d44065f6140a5}{Mode} 
00049     \{
\hypertarget{servothread_8h_source_l00050}{}\hyperlink{class_servo_thread_a8d581034e60792a9995d44065f6140a5a6776147f492a4e0b0bb5ee4fdbc8d086}{00050}         \hyperlink{class_servo_thread_a8d581034e60792a9995d44065f6140a5a6776147f492a4e0b0bb5ee4fdbc8d086}{controlled},
\hypertarget{servothread_8h_source_l00051}{}\hyperlink{class_servo_thread_a8d581034e60792a9995d44065f6140a5ae260aa6159d95b94851c96df939b51b3}{00051}         \hyperlink{class_servo_thread_a8d581034e60792a9995d44065f6140a5ae260aa6159d95b94851c96df939b51b3}{manual}
00052     \};
00053     
00055     \hyperlink{class_servo_thread_af021de9817b11968dd627186e9e05a71}{ServoThread}();
00056     
00058     \hyperlink{class_servo_thread_a0c7ac1f603a247eac91d9780ad50f5fa}{~ServoThread}();
00059     
\hypertarget{servothread_8h_source_l00061}{}\hyperlink{class_servo_thread_a01c61d9505a2aeaa1a4fa4c05474738c}{00061}     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \hyperlink{class_servo_thread_a01c61d9505a2aeaa1a4fa4c05474738c}{cont}()
00062     \{
00063         \hyperlink{class_servo_thread_a6327eafc0dac189ec1b202d63ef32457}{\_mutex}.lock();
00064         \hyperlink{class_servo_thread_aaf2ef80e8e43518b75d20a5102970d2e}{\_pause} = \textcolor{keyword}{false};
00065         \hyperlink{class_servo_thread_afcb93c09acd7fecf47d92996a297365c}{\_cond}.wakeOne();
00066         \hyperlink{class_servo_thread_a6327eafc0dac189ec1b202d63ef32457}{\_mutex}.unlock();
00067     \}
00068     
\hypertarget{servothread_8h_source_l00070}{}\hyperlink{class_servo_thread_aaa273318ffee5ba270cdaacba3f263f8}{00070}     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \hyperlink{class_servo_thread_aaa273318ffee5ba270cdaacba3f263f8}{end}()
00071     \{
00072         \hyperlink{class_servo_thread_a6327eafc0dac189ec1b202d63ef32457}{\_mutex}.lock();
00073         \hyperlink{class_servo_thread_acca9896d1a2d1ef68527e6834f81c76c}{\_end} = \textcolor{keyword}{true};
00074         \hyperlink{class_servo_thread_afcb93c09acd7fecf47d92996a297365c}{\_cond}.wakeOne();
00075         \hyperlink{class_servo_thread_a6327eafc0dac189ec1b202d63ef32457}{\_mutex}.unlock();
00076         
00077         wait();
00078     \}
00079     
00081     \textcolor{keywordtype}{void} \hyperlink{class_servo_thread_ae88d0a9c84099ca607c7cf929500fb26}{load}(QString &file);
00082     
\hypertarget{servothread_8h_source_l00084}{}\hyperlink{class_servo_thread_ae0d4a59954aafbe8cd85f9326e4fcdd0}{00084}     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \hyperlink{class_servo_thread_ae0d4a59954aafbe8cd85f9326e4fcdd0}{pause}()
00085     \{
00086         \hyperlink{class_servo_thread_a6327eafc0dac189ec1b202d63ef32457}{\_mutex}.lock();
00087         \hyperlink{class_servo_thread_aaf2ef80e8e43518b75d20a5102970d2e}{\_pause} = \textcolor{keyword}{true};
00088         \hyperlink{class_servo_thread_a6327eafc0dac189ec1b202d63ef32457}{\_mutex}.unlock();
00089     \}
00090     
\hypertarget{servothread_8h_source_l00091}{}\hyperlink{class_servo_thread_a3fae25aeac390640192ceb38e32dae40}{00091}     \textcolor{keyword}{inline} QString \hyperlink{class_servo_thread_a3fae25aeac390640192ceb38e32dae40}{getServoPort}()
00092     \{
00093         \hyperlink{class_servo_thread_a6327eafc0dac189ec1b202d63ef32457}{\_mutex}.lock();
00094         QString res(\hyperlink{class_servo_thread_ac9a614aa1518efb49b0a06636bd1bdbf}{\_sPort});
00095         \hyperlink{class_servo_thread_a6327eafc0dac189ec1b202d63ef32457}{\_mutex}.unlock();
00096         \textcolor{keywordflow}{return} res;
00097     \}
00098     
00102     \textcolor{keywordtype}{void} \hyperlink{class_servo_thread_a8497ea56991b620981ce1fbf53d9ebdb}{setData}(QVector< float > &aV, QVector<bool> &buts);
00103     
\hypertarget{servothread_8h_source_l00105}{}\hyperlink{class_servo_thread_ac3471e5020f5d9babd3f2ff7b3b82aca}{00105}     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \hyperlink{class_servo_thread_ac3471e5020f5d9babd3f2ff7b3b82aca}{setSID} (QVector< int > &V) 
00106     \{
00107         \hyperlink{class_servo_thread_a6327eafc0dac189ec1b202d63ef32457}{\_mutex}.lock();
00108         \textcolor{keywordflow}{if} (V.size() != \hyperlink{class_servo_thread_a1ac6662fe6d198b5971ae0ffa7ddfcfd}{\_servos}.size()) \hyperlink{class_servo_thread_a1ac6662fe6d198b5971ae0ffa7ddfcfd}{\_servos}.resize(V.size());
00109         
00110         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < V.size(); ++i) \hyperlink{class_servo_thread_a1ac6662fe6d198b5971ae0ffa7ddfcfd}{\_servos}[i].ID = V[i];
00111         \hyperlink{class_servo_thread_a2b6ccfeacbb3cc9ac5c34549b9aa3f11}{\_dChanged} = \textcolor{keyword}{true};
00112         \hyperlink{class_servo_thread_a6327eafc0dac189ec1b202d63ef32457}{\_mutex}.unlock();
00113     \}
00114     
00117     \textcolor{keywordtype}{void} \hyperlink{class_servo_thread_ae5753b8c12768d2115ff900f0ab8e13c}{write}(QString &file); 
00118     
00119 \textcolor{keyword}{private}:
00120     
\hypertarget{servothread_8h_source_l00122}{}\hyperlink{class_servo_thread_aad24ef961ee39dd35766c725c13b11b7}{00122}     QVector < float > \hyperlink{class_servo_thread_aad24ef961ee39dd35766c725c13b11b7}{\_axis};
00123     
\hypertarget{servothread_8h_source_l00125}{}\hyperlink{class_servo_thread_a6f956f7e0f2953e213ff95fb64857ab0}{00125}     QVector < bool > \hyperlink{class_servo_thread_a6f956f7e0f2953e213ff95fb64857ab0}{\_buts};
00126     
\hypertarget{servothread_8h_source_l00128}{}\hyperlink{class_servo_thread_a9fccfd415e2e55c8abef7fcc6535af30}{00128}     \textcolor{keywordtype}{int} \hyperlink{class_servo_thread_a9fccfd415e2e55c8abef7fcc6535af30}{\_cBaud};
00129     
\hypertarget{servothread_8h_source_l00131}{}\hyperlink{class_servo_thread_afcb93c09acd7fecf47d92996a297365c}{00131}     QWaitCondition \hyperlink{class_servo_thread_afcb93c09acd7fecf47d92996a297365c}{\_cond};
00132         
\hypertarget{servothread_8h_source_l00134}{}\hyperlink{class_servo_thread_ab52437b31a433c427a6c050f2b1cc959}{00134}     QString \hyperlink{class_servo_thread_ab52437b31a433c427a6c050f2b1cc959}{\_cPort};
00135     
\hypertarget{servothread_8h_source_l00137}{}\hyperlink{class_servo_thread_a2b6ccfeacbb3cc9ac5c34549b9aa3f11}{00137}     \textcolor{keywordtype}{bool} \hyperlink{class_servo_thread_a2b6ccfeacbb3cc9ac5c34549b9aa3f11}{\_dChanged};
00138     
\hypertarget{servothread_8h_source_l00140}{}\hyperlink{class_servo_thread_acca9896d1a2d1ef68527e6834f81c76c}{00140}     \textcolor{keywordtype}{bool} \hyperlink{class_servo_thread_acca9896d1a2d1ef68527e6834f81c76c}{\_end};
00141     
\hypertarget{servothread_8h_source_l00143}{}\hyperlink{class_servo_thread_acdecea1688594d3ab7386a6db97dd90d}{00143}     \hyperlink{class_servo_thread_a8d581034e60792a9995d44065f6140a5}{Mode} \hyperlink{class_servo_thread_acdecea1688594d3ab7386a6db97dd90d}{\_mod};
00144     
\hypertarget{servothread_8h_source_l00146}{}\hyperlink{class_servo_thread_a6327eafc0dac189ec1b202d63ef32457}{00146}     QMutex \hyperlink{class_servo_thread_a6327eafc0dac189ec1b202d63ef32457}{\_mutex};
00147     
\hypertarget{servothread_8h_source_l00149}{}\hyperlink{class_servo_thread_aaf2ef80e8e43518b75d20a5102970d2e}{00149}     \textcolor{keywordtype}{bool} \hyperlink{class_servo_thread_aaf2ef80e8e43518b75d20a5102970d2e}{\_pause};
00150     
\hypertarget{servothread_8h_source_l00152}{}\hyperlink{class_servo_thread_a5b9a41b9e271275b914affb0a845a2ee}{00152}     \textcolor{keywordtype}{int} \hyperlink{class_servo_thread_a5b9a41b9e271275b914affb0a845a2ee}{\_sBaud};
00153     
\hypertarget{servothread_8h_source_l00155}{}\hyperlink{class_servo_thread_a1ac6662fe6d198b5971ae0ffa7ddfcfd}{00155}     QVector< Servo > \hyperlink{class_servo_thread_a1ac6662fe6d198b5971ae0ffa7ddfcfd}{\_servos};
00156     
\hypertarget{servothread_8h_source_l00158}{}\hyperlink{class_servo_thread_ac9a614aa1518efb49b0a06636bd1bdbf}{00158}     QString \hyperlink{class_servo_thread_ac9a614aa1518efb49b0a06636bd1bdbf}{\_sPort};
00159     
\hypertarget{servothread_8h_source_l00161}{}\hyperlink{class_servo_thread_a6e803432db01b10ed975132315280fd3}{00161}     \textcolor{keywordtype}{bool} \hyperlink{class_servo_thread_a6e803432db01b10ed975132315280fd3}{\_sPortChanged};
00162     
00164     \textcolor{keywordtype}{void} \hyperlink{class_servo_thread_aeeb31b85abf7eb5c701853a6d25e51e0}{run}();
00165     
00166 \};
00167 
00168 \textcolor{preprocessor}{#endif // SERVOTHREAD\_H}
\end{DoxyCode}
