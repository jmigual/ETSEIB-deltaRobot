\hypertarget{classdynamixel2}{}\section{dynamixel2 Class Reference}
\label{classdynamixel2}\index{dynamixel2@{dynamixel2}}


Dynamixel 2.\+0 protocol class.  




{\ttfamily \#include $<$dynamixel.\+h$>$}



Collaboration diagram for dynamixel2\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d6/d1d/classdynamixel2__coll__graph}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structdynamixel2_1_1data}{data}
\begin{DoxyCompactList}\small\item\em Struct used to handle dynamixel data. \end{DoxyCompactList}\item 
struct \hyperlink{structdynamixel2_1_1ping__data}{ping\+\_\+data}
\begin{DoxyCompactList}\small\item\em Struct used to do a ping. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classdynamixel2_a3a93b1220d71166f282ef5f2d8307dbe}{is\+Open} ()
\item 
int \hyperlink{classdynamixel2_aa2c59aef6a9f1adf7df3bf43c8b255a2}{initialize} (Q\+String port\+\_\+num, int baud\+\_\+rate)
\item 
int \hyperlink{classdynamixel2_ad0cef34ebfdd57ba0110e7c3623d7aa6}{change\+\_\+baudrate} (int baud\+\_\+rate)
\item 
int \hyperlink{classdynamixel2_a84d998585aab4e92413220ca5b489a0a}{terminate} (void)
\item 
int \hyperlink{classdynamixel2_a46f02d077a26dae6e8e52df6d89f035a}{get\+\_\+comm\+\_\+result} (void)
\item 
void \hyperlink{classdynamixel2_a526e395e15fbf50ffbc8ce0853b08233}{tx\+\_\+packet} (void)
\item 
void \hyperlink{classdynamixel2_a7ca03821f030981263c55f2ae2786c4c}{rx\+\_\+packet} (void)
\item 
void \hyperlink{classdynamixel2_a2cccd455a52afe99a37b249aa834cdc7}{txrx\+\_\+packet} (void)
\item 
void \hyperlink{classdynamixel2_a78e147772e166a87d8e64656843d9e37}{set\+\_\+txpacket\+\_\+id} (unsigned char id)
\item 
void \hyperlink{classdynamixel2_a86ac906e5b548649510366ca978aed05}{set\+\_\+txpacket\+\_\+instruction} (unsigned char instruction)
\item 
void \hyperlink{classdynamixel2_a4737bc55c853cedb5102d5c38ab1a1b5}{set\+\_\+txpacket\+\_\+parameter} (unsigned short index, unsigned char value)
\item 
void \hyperlink{classdynamixel2_a2831a22a03d36e4590c9ad368efa10cf}{set\+\_\+txpacket\+\_\+length} (unsigned short length)
\item 
int \hyperlink{classdynamixel2_a0de7ef4de89f220945b9b9028c24796f}{get\+\_\+rxpacket\+\_\+error\+\_\+byte} (void)
\item 
int \hyperlink{classdynamixel2_a16298831a1f2430bc9d7fc826d8c5dfd}{get\+\_\+rxpacket\+\_\+parameter} (int index)
\item 
int \hyperlink{classdynamixel2_a70ada371be989aacab473e81cc002156}{get\+\_\+rxpacket\+\_\+length} ()
\item 
void \hyperlink{classdynamixel2_abf94a0932647959fff04aed5c6708f79}{ping} (unsigned char id)
\item 
int \hyperlink{classdynamixel2_a13fcec580551a263fcb4e4aad311ace0}{get\+\_\+ping\+\_\+result} (unsigned char id, int info\+\_\+num)
\item 
void \hyperlink{classdynamixel2_a79993ea3bc2230635d9e3d9e2f9ec27c}{broadcast\+\_\+ping} ()
\item 
void \hyperlink{classdynamixel2_a674ea4cce4a1f807c0749ac7eb685cd6}{reboot} (unsigned char id)
\item 
void \hyperlink{classdynamixel2_ab10d0f6f3c77e02dc028ba19ac55c609}{factory\+\_\+reset} (unsigned char id, int option)
\item 
unsigned char \hyperlink{classdynamixel2_ae7641411f8eea1d9e14afceb303bc93c}{read\+\_\+byte} (unsigned char id, int address)
\item 
void \hyperlink{classdynamixel2_ae511ba1af88cae4f3307d50242491011}{write\+\_\+byte} (unsigned char id, int address, unsigned char value)
\item 
unsigned short \hyperlink{classdynamixel2_a9b31ab524b63e309ce9f23fde56eb437}{read\+\_\+word} (unsigned char id, int address)
\item 
void \hyperlink{classdynamixel2_aa74bdf1e52647d6b3d290b09eac32f1d}{write\+\_\+word} (unsigned char id, int address, unsigned short value)
\item 
unsigned long \hyperlink{classdynamixel2_adb108e5166ba4beee4138e26ef16d1a4}{read\+\_\+dword} (unsigned char id, int address)
\item 
void \hyperlink{classdynamixel2_a502f5c430f5370ab7f158204c5631ac7}{write\+\_\+dword} (unsigned char id, int address, unsigned long value)
\item 
unsigned char \hyperlink{classdynamixel2_a3d32eb232e64ceb94b007268da2c05a3}{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+byte} (unsigned char id, unsigned int start\+\_\+address)
\item 
unsigned short \hyperlink{classdynamixel2_a5ba5fc3f030b88dd3dc889ab74724243}{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+word} (unsigned char id, unsigned int start\+\_\+address)
\item 
unsigned long \hyperlink{classdynamixel2_a2a896c35eab94d52c5b5e795daa978a3}{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+dword} (unsigned char id, unsigned int start\+\_\+address)
\item 
unsigned char \hyperlink{classdynamixel2_a30691b3d428a8937cc53142e3c22e94f}{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+byte} (unsigned char id, unsigned int start\+\_\+address)
\item 
unsigned short \hyperlink{classdynamixel2_a5afed0047167b1a4262d7fb961faa488}{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+word} (unsigned char id, unsigned int start\+\_\+address)
\item 
unsigned long \hyperlink{classdynamixel2_a4f25408bacde5a8a3b00b2f7f79f0202}{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+dword} (unsigned char id, unsigned int start\+\_\+address)
\item 
void \hyperlink{classdynamixel2_a350920b911d0ad2116b91f2149b840c7}{add\+\_\+stuffing} ()
\item 
void \hyperlink{classdynamixel2_a910c7b80ace3a816641468b32c0290a6}{remove\+\_\+stuffing} ()
\item 
double \hyperlink{classdynamixel2_a7d4d98424dc85511970e9a405b919594}{get\+\_\+packet\+\_\+time} ()
\item 
int \hyperlink{classdynamixel2_a4c996c0d9edcfd320906674512837a9e}{is\+\_\+packet\+\_\+timeout} ()
\item 
void \hyperlink{classdynamixel2_a132d723a321ba225f75f2c79e5d4d27b}{set\+\_\+packet\+\_\+timeout} (int Num\+Rcv\+Byte)
\item 
void \hyperlink{classdynamixel2_a7d85d44aa6c1fe51f952f395a79296d5}{set\+\_\+packet\+\_\+timeout\+\_\+ms} (int msec)
\end{DoxyCompactItemize}
\subsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structdynamixel2_1_1ping__data}{dynamixel2\+::ping\+\_\+data} \hyperlink{classdynamixel2_a0ca8255cb0a7a1584c9638d83196c7ae}{Ping\+Data}
\begin{DoxyCompactList}\small\item\em Struct used to do a ping. \end{DoxyCompactList}\item 
typedef struct \hyperlink{structdynamixel2_1_1data}{dynamixel2\+::data} \hyperlink{classdynamixel2_a7d3321dea922094901dd5b5afe31bb60}{Sync\+Bulk\+Data}
\begin{DoxyCompactList}\small\item\em Struct used to handle dynamixel data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
unsigned char \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gb\+Instruction\+Packet} \mbox{[}\hyperlink{dxl__hal_8h_ad753363487043da5d9fdd3fd1071f59e}{M\+A\+X\+N\+U\+M\+\_\+\+T\+X\+P\+A\+C\+K\+E\+T}\mbox{]} = \{0\}
\item 
unsigned char \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gb\+Status\+Packet} \mbox{[}\hyperlink{dxl__hal_8h_a37d5ce8f0a9ee058fa9674502c6a8b3a}{M\+A\+X\+N\+U\+M\+\_\+\+R\+X\+P\+A\+C\+K\+E\+T}\mbox{]} = \{0\}
\item 
unsigned int \hyperlink{classdynamixel2_a7ae9bffcc9f4b087c57640881ccbb378}{gb\+Rx\+Packet\+Length} = 0
\item 
unsigned int \hyperlink{classdynamixel2_ad82d286e6b47c7243a3c5fd5ced0ebf4}{gb\+Rx\+Get\+Length} = 0
\item 
double \hyperlink{classdynamixel2_ac9746f2c7ed6d706152d6d0d502993c0}{gd\+Packet\+Start\+Time} = 0.\+0
\item 
double \hyperlink{classdynamixel2_a786e818a88ec65d3b7e2f30b55ec31ba}{gd\+Byte\+Trans\+Time} = 0.\+0
\item 
double \hyperlink{classdynamixel2_ae7b830369861e191120f9b310a68e2d8}{gd\+Rcv\+Wait\+Time} = 0.\+0
\item 
int \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gb\+Comm\+Status} = \hyperlink{dynamixel_8h_a171328d9f298535c18d079f65e631434}{C\+O\+M\+M\+\_\+\+R\+X\+S\+U\+C\+C\+E\+S\+S}
\item 
int \hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{gi\+Bus\+Using} = 0
\item 
\hyperlink{classdxl__hal}{dxl\+\_\+hal} \hyperlink{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{d\+H}
\item 
\hyperlink{classdynamixel2_a0ca8255cb0a7a1584c9638d83196c7ae}{Ping\+Data} \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{g\+Ping\+Data} \mbox{[}\hyperlink{dynamixel_8h_a1cdef4472847c938fc165b7d2737c4e4}{M\+A\+X\+\_\+\+I\+D}+1\mbox{]}
\item 
\hyperlink{classdynamixel2_a7d3321dea922094901dd5b5afe31bb60}{Sync\+Bulk\+Data} \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{g\+Sync\+Data} \mbox{[}\hyperlink{dynamixel_8h_a1cdef4472847c938fc165b7d2737c4e4}{M\+A\+X\+\_\+\+I\+D}+1\mbox{]}
\item 
\hyperlink{classdynamixel2_a7d3321dea922094901dd5b5afe31bb60}{Sync\+Bulk\+Data} \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{g\+Bulk\+Data} \mbox{[}\hyperlink{dynamixel_8h_a1cdef4472847c938fc165b7d2737c4e4}{M\+A\+X\+\_\+\+I\+D}+1\mbox{]}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Dynamixel 2.\+0 protocol class. 

\subsection{Member Typedef Documentation}
\hypertarget{classdynamixel2_a0ca8255cb0a7a1584c9638d83196c7ae}{}\index{dynamixel2@{dynamixel2}!Ping\+Data@{Ping\+Data}}
\index{Ping\+Data@{Ping\+Data}!dynamixel2@{dynamixel2}}
\subsubsection[{Ping\+Data}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf dynamixel2\+::ping\+\_\+data}  {\bf dynamixel2\+::\+Ping\+Data}\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_a0ca8255cb0a7a1584c9638d83196c7ae}


Struct used to do a ping. 

\hypertarget{classdynamixel2_a7d3321dea922094901dd5b5afe31bb60}{}\index{dynamixel2@{dynamixel2}!Sync\+Bulk\+Data@{Sync\+Bulk\+Data}}
\index{Sync\+Bulk\+Data@{Sync\+Bulk\+Data}!dynamixel2@{dynamixel2}}
\subsubsection[{Sync\+Bulk\+Data}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf dynamixel2\+::data}  {\bf dynamixel2\+::\+Sync\+Bulk\+Data}\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_a7d3321dea922094901dd5b5afe31bb60}


Struct used to handle dynamixel data. 



\subsection{Member Function Documentation}
\hypertarget{classdynamixel2_a350920b911d0ad2116b91f2149b840c7}{}\index{dynamixel2@{dynamixel2}!add\+\_\+stuffing@{add\+\_\+stuffing}}
\index{add\+\_\+stuffing@{add\+\_\+stuffing}!dynamixel2@{dynamixel2}}
\subsubsection[{add\+\_\+stuffing}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::add\+\_\+stuffing (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a350920b911d0ad2116b91f2149b840c7}

\begin{DoxyCode}
00524 \{
00525     \textcolor{keywordtype}{int} i = 0, index = 0;
00526     \textcolor{keywordtype}{int} packet\_length\_in = \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}], \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]);
00527     \textcolor{keywordtype}{int} packet\_length\_out = packet\_length\_in;
00528     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} temp[\hyperlink{dxl__hal_8h_ad753363487043da5d9fdd3fd1071f59e}{MAXNUM\_TXPACKET}] = \{0\};
00529 
00530     memcpy(temp, \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}, \hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}+1);    \textcolor{comment}{// FF FF
       FD XX ID LEN\_L LEN\_H}
00531     index = \hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION};
00532     \textcolor{keywordflow}{for}( i = 0; i < packet\_length\_in - 2; i++)  \textcolor{comment}{// except CRC}
00533     \{
00534         \textcolor{keywordflow}{if}((index - 1) == \hyperlink{dxl__hal_8h_ad753363487043da5d9fdd3fd1071f59e}{MAXNUM\_TXPACKET}) \{
00535             \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a1bd7c7b30db4f56dc80cef65ad38afff}{COMM\_TXERROR};
00536             \textcolor{keywordflow}{return};
00537         \}
00538         temp[index++] = \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[i+
      \hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}];
00539 
00540         \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[i+\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] == 0xFD && 
      \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[i+\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}-1] == 0xFF && 
      \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[i+\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}-2] == 0xFF)
00541         \{   
00542             \textcolor{keywordflow}{if}((index - 1) == \hyperlink{dxl__hal_8h_ad753363487043da5d9fdd3fd1071f59e}{MAXNUM\_TXPACKET}) \{
00543                 \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a1bd7c7b30db4f56dc80cef65ad38afff}{COMM\_TXERROR};
00544                 \textcolor{keywordflow}{return};
00545             \}
00546             \textcolor{comment}{// FF FF FD}
00547             temp[index++] = 0xFD;
00548 
00549             packet\_length\_out++;
00550         \}
00551     \}
00552 
00553     \textcolor{keywordflow}{if}((index - 1) == \hyperlink{dxl__hal_8h_ad753363487043da5d9fdd3fd1071f59e}{MAXNUM\_TXPACKET}) \{
00554         \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a1bd7c7b30db4f56dc80cef65ad38afff}{COMM\_TXERROR};
00555         \textcolor{keywordflow}{return};
00556     \}
00557     temp[index++] = \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}+
      packet\_length\_in-2];
00558 
00559     \textcolor{keywordflow}{if}((index - 1) == \hyperlink{dxl__hal_8h_ad753363487043da5d9fdd3fd1071f59e}{MAXNUM\_TXPACKET}) \{
00560         \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a1bd7c7b30db4f56dc80cef65ad38afff}{COMM\_TXERROR};
00561         \textcolor{keywordflow}{return};
00562     \}
00563     temp[index++] = \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}+
      packet\_length\_in-1];
00564 
00565     memcpy(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}, temp, index);
00566     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}] = 
      \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(packet\_length\_out);
00567     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}] = 
      \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(packet\_length\_out);
00568 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a79993ea3bc2230635d9e3d9e2f9ec27c}{}\index{dynamixel2@{dynamixel2}!broadcast\+\_\+ping@{broadcast\+\_\+ping}}
\index{broadcast\+\_\+ping@{broadcast\+\_\+ping}!dynamixel2@{dynamixel2}}
\subsubsection[{broadcast\+\_\+ping}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::broadcast\+\_\+ping (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a79993ea3bc2230635d9e3d9e2f9ec27c}

\begin{DoxyCode}
01049 \{
01050     \textcolor{keywordtype}{int} idx = 0;
01051 
01052     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_af88390c8be18c4079e65fd07b8d553be}{COMM\_TXFAIL};
01053 
01054     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]            = 
      \hyperlink{dynamixel_8h_ab9fe47395310b34fa1ceb112c9ca10e2}{BROADCAST\_ID};
01055     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}]      = 0x03;
01056     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]      = 0x00;
01057     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}]   = 
      \hyperlink{dynamixel_8h_acb92e93ddd4b53533b14dc3403346bbf}{INST\_PING};
01058 
01059     \textcolor{keywordflow}{for}(idx = 1; idx <= \hyperlink{dynamixel_8h_a1cdef4472847c938fc165b7d2737c4e4}{MAX\_ID}; idx++)
01060     \{
01061         \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[idx].\hyperlink{structdynamixel2_1_1ping__data_a7c8829a586a920b2abe49719957abd37}{iID} = idx;
01062         \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[idx].\hyperlink{structdynamixel2_1_1ping__data_a869956077eab76548aaffde67817b2bf}{iFirmVer} = -1;
01063         \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[idx].\hyperlink{structdynamixel2_1_1ping__data_a1786b3e1400d2ff8b8361b367b52fbb7}{iModelNo} = -1;
01064     \}
01065 
01066     \hyperlink{classdynamixel2_a2cccd455a52afe99a37b249aa834cdc7}{txrx\_packet}();
01067 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_ad0cef34ebfdd57ba0110e7c3623d7aa6}{}\index{dynamixel2@{dynamixel2}!change\+\_\+baudrate@{change\+\_\+baudrate}}
\index{change\+\_\+baudrate@{change\+\_\+baudrate}!dynamixel2@{dynamixel2}}
\subsubsection[{change\+\_\+baudrate}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel2\+::change\+\_\+baudrate (
\begin{DoxyParamCaption}
\item[{int}]{baud\+\_\+rate}
\end{DoxyParamCaption}
)}\label{classdynamixel2_ad0cef34ebfdd57ba0110e7c3623d7aa6}

\begin{DoxyCode}
00411 \{
00412     \textcolor{keywordtype}{int} result = 0;
00413     \textcolor{keywordtype}{float} baudrate = (float)baud\_rate;
00414     
00415     result = \hyperlink{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{dH}.\hyperlink{classdxl__hal_a0eaaa5340bc9dce73cc920dc8befe5b0}{change\_baudrate}(baudrate);
00416     \textcolor{keywordflow}{if}(result == 1)
00417         \hyperlink{classdynamixel2_a786e818a88ec65d3b7e2f30b55ec31ba}{gdByteTransTime} = 1000.0f / baudrate * 10.0; \textcolor{comment}{// 1000/baudrate(bit per msec) *
       10(start bit + data bit + stop bit)}
00418 
00419     \textcolor{keywordflow}{return} result;
00420 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_ab10d0f6f3c77e02dc028ba19ac55c609}{}\index{dynamixel2@{dynamixel2}!factory\+\_\+reset@{factory\+\_\+reset}}
\index{factory\+\_\+reset@{factory\+\_\+reset}!dynamixel2@{dynamixel2}}
\subsubsection[{factory\+\_\+reset}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::factory\+\_\+reset (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{int}]{option}
\end{DoxyParamCaption}
)}\label{classdynamixel2_ab10d0f6f3c77e02dc028ba19ac55c609}

\begin{DoxyCode}
01086 \{
01087     \textcolor{keywordflow}{if}(\textcolor{keywordtype}{id} == \hyperlink{dynamixel_8h_ab9fe47395310b34fa1ceb112c9ca10e2}{BROADCAST\_ID})
01088     \{
01089         \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a1bd7c7b30db4f56dc80cef65ad38afff}{COMM\_TXERROR};
01090         \textcolor{keywordflow}{return};
01091     \}
01092 
01093     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_af88390c8be18c4079e65fd07b8d553be}{COMM\_TXFAIL};
01094 
01095     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]            = (\textcolor{keywordtype}{unsigned} char)\textcolor{keywordtype}{id};
01096     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}]      = 0x04;
01097     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]      = 0x00;
01098     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}]   = 
      \hyperlink{dynamixel_8h_ad670526ca941302efb4a0d00e7dd43c0}{INST\_RESET};
01099     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}] 
      = (\textcolor{keywordtype}{unsigned} char)option;
01100 
01101     \hyperlink{classdynamixel2_a2cccd455a52afe99a37b249aa834cdc7}{txrx\_packet}();
01102 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a3d32eb232e64ceb94b007268da2c05a3}{}\index{dynamixel2@{dynamixel2}!get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+byte@{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+byte}}
\index{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+byte@{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+byte}!dynamixel2@{dynamixel2}}
\subsubsection[{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+byte}]{\setlength{\rightskip}{0pt plus 5cm}unsigned char dynamixel2\+::get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+byte (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{unsigned int}]{start\+\_\+address}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a3d32eb232e64ceb94b007268da2c05a3}

\begin{DoxyCode}
01215 \{
01216     \textcolor{keywordflow}{if}((start\_address < \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iStartAddr) || ((\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iStartAddr + 
      \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iLength-1) < start\_address))
01217         \textcolor{keywordflow}{return} 0;
01218     \textcolor{keywordflow}{return} \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[id].\hyperlink{structdynamixel2_1_1data_ae06fa51258979434fbc9f0e128824950}{pucTable}[(start\_address-\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[id].
      \hyperlink{structdynamixel2_1_1data_adfeca69c1b405b26a9381d53e3954156}{iStartAddr})];
01219 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a2a896c35eab94d52c5b5e795daa978a3}{}\index{dynamixel2@{dynamixel2}!get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+dword@{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+dword}}
\index{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+dword@{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+dword}!dynamixel2@{dynamixel2}}
\subsubsection[{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+dword}]{\setlength{\rightskip}{0pt plus 5cm}unsigned long dynamixel2\+::get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+dword (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{unsigned int}]{start\+\_\+address}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a2a896c35eab94d52c5b5e795daa978a3}

\begin{DoxyCode}
01230 \{
01231     \textcolor{keywordflow}{if}((start\_address < \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iStartAddr) || ((\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iStartAddr + 
      \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iLength-1) < start\_address))
01232         \textcolor{keywordflow}{return} 0;
01233     \textcolor{keywordflow}{return} \hyperlink{dynamixel_8h_a84e53a3db3f2ef95c6085d6f3531ae0e}{MAKEDWORD}(\hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].pucTable[(start\_address-
      \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iStartAddr)],
01234                                       \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].pucTable[(start\_address-
      \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iStartAddr+1)]),
01235                          \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].pucTable[(start\_address-
      \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iStartAddr+2)],
01236                                       \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].pucTable[(start\_address-
      \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iStartAddr+3)]));
01237 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a5ba5fc3f030b88dd3dc889ab74724243}{}\index{dynamixel2@{dynamixel2}!get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+word@{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+word}}
\index{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+word@{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+word}!dynamixel2@{dynamixel2}}
\subsubsection[{get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+word}]{\setlength{\rightskip}{0pt plus 5cm}unsigned short dynamixel2\+::get\+\_\+bulk\+\_\+read\+\_\+data\+\_\+word (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{unsigned int}]{start\+\_\+address}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a5ba5fc3f030b88dd3dc889ab74724243}

\begin{DoxyCode}
01222 \{
01223     \textcolor{keywordflow}{if}( (start\_address < \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iStartAddr) || ((\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iStartAddr + 
      \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iLength-1) < start\_address))
01224         \textcolor{keywordflow}{return} 0;
01225     \textcolor{keywordflow}{return} \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].pucTable[(start\_address-
      \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iStartAddr)],
01226                         \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].pucTable[(start\_address-\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iStartAddr+1)
      ]);
01227 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a46f02d077a26dae6e8e52df6d89f035a}{}\index{dynamixel2@{dynamixel2}!get\+\_\+comm\+\_\+result@{get\+\_\+comm\+\_\+result}}
\index{get\+\_\+comm\+\_\+result@{get\+\_\+comm\+\_\+result}!dynamixel2@{dynamixel2}}
\subsubsection[{get\+\_\+comm\+\_\+result}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel2\+::get\+\_\+comm\+\_\+result (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a46f02d077a26dae6e8e52df6d89f035a}
\hypertarget{classdynamixel2_a7d4d98424dc85511970e9a405b919594}{}\index{dynamixel2@{dynamixel2}!get\+\_\+packet\+\_\+time@{get\+\_\+packet\+\_\+time}}
\index{get\+\_\+packet\+\_\+time@{get\+\_\+packet\+\_\+time}!dynamixel2@{dynamixel2}}
\subsubsection[{get\+\_\+packet\+\_\+time}]{\setlength{\rightskip}{0pt plus 5cm}double dynamixel2\+::get\+\_\+packet\+\_\+time (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a7d4d98424dc85511970e9a405b919594}

\begin{DoxyCode}
00439 \{
00440     \textcolor{keywordtype}{double} elapsed\_time;
00441 
00442     elapsed\_time = (double)(\hyperlink{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{dH}.\hyperlink{classdxl__hal_a6b6b7381c45308662fc3df6e7f74bc61}{get\_curr\_time}() - 
      \hyperlink{classdynamixel2_ac9746f2c7ed6d706152d6d0d502993c0}{gdPacketStartTime});
00443 
00444     \textcolor{comment}{// Overflow}
00445     \textcolor{keywordflow}{if}(elapsed\_time < 0)
00446         \hyperlink{classdynamixel2_ac9746f2c7ed6d706152d6d0d502993c0}{gdPacketStartTime} = \hyperlink{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{dH}.\hyperlink{classdxl__hal_a6b6b7381c45308662fc3df6e7f74bc61}{get\_curr\_time}();
00447     
00448     \textcolor{keywordflow}{return} elapsed\_time;
00449 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a13fcec580551a263fcb4e4aad311ace0}{}\index{dynamixel2@{dynamixel2}!get\+\_\+ping\+\_\+result@{get\+\_\+ping\+\_\+result}}
\index{get\+\_\+ping\+\_\+result@{get\+\_\+ping\+\_\+result}!dynamixel2@{dynamixel2}}
\subsubsection[{get\+\_\+ping\+\_\+result}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel2\+::get\+\_\+ping\+\_\+result (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{int}]{info\+\_\+num}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a13fcec580551a263fcb4e4aad311ace0}

\begin{DoxyCode}
01036 \{
01037     \textcolor{keywordflow}{if}(\textcolor{keywordtype}{id} <= \hyperlink{dynamixel_8h_a1cdef4472847c938fc165b7d2737c4e4}{MAX\_ID} && \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[\textcolor{keywordtype}{id}].iModelNo != -1 && \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[\textcolor{keywordtype}{id}].iFirmVer != -1
      )
01038     \{
01039         \textcolor{keywordflow}{if}(info\_num == \hyperlink{dynamixel_8h_addfe8da7a67888c0c7718cdd2f2ddfd4}{PING\_INFO\_MODEL\_NUM} )
01040             \textcolor{keywordflow}{return} \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[id].\hyperlink{structdynamixel2_1_1ping__data_a1786b3e1400d2ff8b8361b367b52fbb7}{iModelNo};
01041         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(info\_num == \hyperlink{dynamixel_8h_a2567de0a1d75cc4dfd4b0cf1abf425c9}{PING\_INFO\_FIRM\_VER})
01042             \textcolor{keywordflow}{return} \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[id].\hyperlink{structdynamixel2_1_1ping__data_a869956077eab76548aaffde67817b2bf}{iFirmVer};
01043     \}
01044 
01045     \textcolor{keywordflow}{return} 0;
01046 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a0de7ef4de89f220945b9b9028c24796f}{}\index{dynamixel2@{dynamixel2}!get\+\_\+rxpacket\+\_\+error\+\_\+byte@{get\+\_\+rxpacket\+\_\+error\+\_\+byte}}
\index{get\+\_\+rxpacket\+\_\+error\+\_\+byte@{get\+\_\+rxpacket\+\_\+error\+\_\+byte}!dynamixel2@{dynamixel2}}
\subsubsection[{get\+\_\+rxpacket\+\_\+error\+\_\+byte}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel2\+::get\+\_\+rxpacket\+\_\+error\+\_\+byte (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a0de7ef4de89f220945b9b9028c24796f}

\begin{DoxyCode}
00999 \{
01000     \textcolor{keywordflow}{return} \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[\hyperlink{dynamixel_8h_a3bb6395e5d1d539b3027a16120f7c337}{PRT2\_PKT\_ERRBIT}];
01001 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a70ada371be989aacab473e81cc002156}{}\index{dynamixel2@{dynamixel2}!get\+\_\+rxpacket\+\_\+length@{get\+\_\+rxpacket\+\_\+length}}
\index{get\+\_\+rxpacket\+\_\+length@{get\+\_\+rxpacket\+\_\+length}!dynamixel2@{dynamixel2}}
\subsubsection[{get\+\_\+rxpacket\+\_\+length}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel2\+::get\+\_\+rxpacket\+\_\+length (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a70ada371be989aacab473e81cc002156}

\begin{DoxyCode}
01009 \{
01010     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})\hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}], 
      \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]);
01011 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a16298831a1f2430bc9d7fc826d8c5dfd}{}\index{dynamixel2@{dynamixel2}!get\+\_\+rxpacket\+\_\+parameter@{get\+\_\+rxpacket\+\_\+parameter}}
\index{get\+\_\+rxpacket\+\_\+parameter@{get\+\_\+rxpacket\+\_\+parameter}!dynamixel2@{dynamixel2}}
\subsubsection[{get\+\_\+rxpacket\+\_\+parameter}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel2\+::get\+\_\+rxpacket\+\_\+parameter (
\begin{DoxyParamCaption}
\item[{int}]{index}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a16298831a1f2430bc9d7fc826d8c5dfd}

\begin{DoxyCode}
01004 \{
01005     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[\hyperlink{dynamixel_8h_a7c79167a35ad785b57c7c8de66c59e5c}{PRT2\_STATUS\_PKT\_PARAMETER0}+index];
01006 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a30691b3d428a8937cc53142e3c22e94f}{}\index{dynamixel2@{dynamixel2}!get\+\_\+sync\+\_\+read\+\_\+data\+\_\+byte@{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+byte}}
\index{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+byte@{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+byte}!dynamixel2@{dynamixel2}}
\subsubsection[{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+byte}]{\setlength{\rightskip}{0pt plus 5cm}unsigned char dynamixel2\+::get\+\_\+sync\+\_\+read\+\_\+data\+\_\+byte (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{unsigned int}]{start\+\_\+address}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a30691b3d428a8937cc53142e3c22e94f}

\begin{DoxyCode}
01240 \{
01241     \textcolor{keywordflow}{if}((start\_address < \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iStartAddr) || ((\hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iStartAddr + 
      \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iLength-1) < start\_address))
01242         \textcolor{keywordflow}{return} 0;
01243     \textcolor{keywordflow}{return} \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[id].\hyperlink{structdynamixel2_1_1data_ae06fa51258979434fbc9f0e128824950}{pucTable}[(start\_address-\hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[id].
      \hyperlink{structdynamixel2_1_1data_adfeca69c1b405b26a9381d53e3954156}{iStartAddr})];
01244 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a4f25408bacde5a8a3b00b2f7f79f0202}{}\index{dynamixel2@{dynamixel2}!get\+\_\+sync\+\_\+read\+\_\+data\+\_\+dword@{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+dword}}
\index{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+dword@{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+dword}!dynamixel2@{dynamixel2}}
\subsubsection[{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+dword}]{\setlength{\rightskip}{0pt plus 5cm}unsigned long dynamixel2\+::get\+\_\+sync\+\_\+read\+\_\+data\+\_\+dword (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{unsigned int}]{start\+\_\+address}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a4f25408bacde5a8a3b00b2f7f79f0202}

\begin{DoxyCode}
01255 \{
01256     \textcolor{keywordflow}{if}((start\_address < \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iStartAddr) || ((\hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iStartAddr + 
      \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iLength-1) < start\_address))
01257         \textcolor{keywordflow}{return} 0;
01258     \textcolor{keywordflow}{return} \hyperlink{dynamixel_8h_a84e53a3db3f2ef95c6085d6f3531ae0e}{MAKEDWORD}(\hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].pucTable[(start\_address-
      \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iStartAddr)+0],
01259                                       \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].pucTable[(start\_address-
      \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iStartAddr)+1]),
01260                          \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].pucTable[(start\_address-
      \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iStartAddr)+2],
01261                                       \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].pucTable[(start\_address-
      \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iStartAddr)+3]));
01262 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a5afed0047167b1a4262d7fb961faa488}{}\index{dynamixel2@{dynamixel2}!get\+\_\+sync\+\_\+read\+\_\+data\+\_\+word@{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+word}}
\index{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+word@{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+word}!dynamixel2@{dynamixel2}}
\subsubsection[{get\+\_\+sync\+\_\+read\+\_\+data\+\_\+word}]{\setlength{\rightskip}{0pt plus 5cm}unsigned short dynamixel2\+::get\+\_\+sync\+\_\+read\+\_\+data\+\_\+word (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{unsigned int}]{start\+\_\+address}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a5afed0047167b1a4262d7fb961faa488}

\begin{DoxyCode}
01247 \{
01248     \textcolor{keywordflow}{if}((start\_address < \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iStartAddr) || ((\hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iStartAddr + 
      \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iLength-1) < start\_address))
01249         \textcolor{keywordflow}{return} 0;
01250     \textcolor{keywordflow}{return} \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].pucTable[(start\_address-
      \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iStartAddr)],
01251                         \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].pucTable[(start\_address-\hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].iStartAddr+1)
      ]);
01252 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_aa2c59aef6a9f1adf7df3bf43c8b255a2}{}\index{dynamixel2@{dynamixel2}!initialize@{initialize}}
\index{initialize@{initialize}!dynamixel2@{dynamixel2}}
\subsubsection[{initialize}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel2\+::initialize (
\begin{DoxyParamCaption}
\item[{Q\+String}]{port\+\_\+num, }
\item[{int}]{baud\+\_\+rate}
\end{DoxyParamCaption}
)}\label{classdynamixel2_aa2c59aef6a9f1adf7df3bf43c8b255a2}

\begin{DoxyCode}
00373 \{
00374     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} idx = 0;
00375 
00376     \textcolor{keywordflow}{if}( baud\_rate < 1900 )
00377         \textcolor{keywordflow}{return} 0;
00378 
00379     \textcolor{keywordflow}{if}( \hyperlink{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{dH}.\hyperlink{classdxl__hal_ab631c2a5533125f14db9a8ec1c33aa7c}{open}(port\_num, baud\_rate) == 0 )
00380         \textcolor{keywordflow}{return} 0;
00381 
00382     \hyperlink{classdynamixel2_a786e818a88ec65d3b7e2f30b55ec31ba}{gdByteTransTime} = 1000.0 / (double)baud\_rate * 10.0; \textcolor{comment}{// 1000/baudrate(bit per msec) *
       10(start bit + data bit + stop bit)}
00383 
00384 
00385     \textcolor{keywordflow}{for}(idx = 1; idx <= \hyperlink{dynamixel_8h_a1cdef4472847c938fc165b7d2737c4e4}{MAX\_ID}; idx++)
00386     \{
00387         \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[idx].\hyperlink{structdynamixel2_1_1data_ab60c037af9dfe1f3c62f15d0581a5837}{iID}        = idx;
00388         \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[idx].\hyperlink{structdynamixel2_1_1data_adfeca69c1b405b26a9381d53e3954156}{iStartAddr} = 1;
00389         \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[idx].\hyperlink{structdynamixel2_1_1data_a7d8d57614c387663f0658bbf4b7a69eb}{iLength}    = 1;
00390         \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[idx].\hyperlink{structdynamixel2_1_1data_a1c974bc78558d2a55f9a7c647cbb36f5}{iError}      = 0;
00391         \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[idx].\hyperlink{structdynamixel2_1_1data_ae06fa51258979434fbc9f0e128824950}{pucTable}      = 0;
00392 
00393         \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[idx].\hyperlink{structdynamixel2_1_1data_ab60c037af9dfe1f3c62f15d0581a5837}{iID}        = idx;
00394         \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[idx].\hyperlink{structdynamixel2_1_1data_adfeca69c1b405b26a9381d53e3954156}{iStartAddr} = 1;
00395         \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[idx].\hyperlink{structdynamixel2_1_1data_a7d8d57614c387663f0658bbf4b7a69eb}{iLength}    = 1;
00396         \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[idx].\hyperlink{structdynamixel2_1_1data_a1c974bc78558d2a55f9a7c647cbb36f5}{iError}      = 0;
00397         \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[idx].\hyperlink{structdynamixel2_1_1data_ae06fa51258979434fbc9f0e128824950}{pucTable}      = 0;
00398 
00399         \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[idx].\hyperlink{structdynamixel2_1_1ping__data_a7c8829a586a920b2abe49719957abd37}{iID} = idx;
00400         \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[idx].\hyperlink{structdynamixel2_1_1ping__data_a869956077eab76548aaffde67817b2bf}{iFirmVer} = -1;
00401         \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[idx].\hyperlink{structdynamixel2_1_1ping__data_a1786b3e1400d2ff8b8361b367b52fbb7}{iModelNo} = -1;
00402     \}
00403 
00404     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a171328d9f298535c18d079f65e631434}{COMM\_RXSUCCESS};
00405     \hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} = 0;
00406 
00407     \textcolor{keywordflow}{return} 1;
00408 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a4c996c0d9edcfd320906674512837a9e}{}\index{dynamixel2@{dynamixel2}!is\+\_\+packet\+\_\+timeout@{is\+\_\+packet\+\_\+timeout}}
\index{is\+\_\+packet\+\_\+timeout@{is\+\_\+packet\+\_\+timeout}!dynamixel2@{dynamixel2}}
\subsubsection[{is\+\_\+packet\+\_\+timeout}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel2\+::is\+\_\+packet\+\_\+timeout (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a4c996c0d9edcfd320906674512837a9e}

\begin{DoxyCode}
00452 \{
00453     \textcolor{keywordflow}{if}(this->\hyperlink{classdynamixel2_a7d4d98424dc85511970e9a405b919594}{get\_packet\_time}() > \hyperlink{classdynamixel2_ae7b830369861e191120f9b310a68e2d8}{gdRcvWaitTime})
00454         \textcolor{keywordflow}{return} 1;
00455     \textcolor{keywordflow}{return} 0;
00456 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a3a93b1220d71166f282ef5f2d8307dbe}{}\index{dynamixel2@{dynamixel2}!is\+Open@{is\+Open}}
\index{is\+Open@{is\+Open}!dynamixel2@{dynamixel2}}
\subsubsection[{is\+Open}]{\setlength{\rightskip}{0pt plus 5cm}bool dynamixel2\+::is\+Open (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classdynamixel2_a3a93b1220d71166f282ef5f2d8307dbe}

\begin{DoxyCode}
00189 \{ \textcolor{keywordflow}{return} \hyperlink{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{dH}.\hyperlink{classdxl__hal_a88bba601b5c9f285fcdc14e18a1f3398}{isOpen}(); \}
\end{DoxyCode}
\hypertarget{classdynamixel2_abf94a0932647959fff04aed5c6708f79}{}\index{dynamixel2@{dynamixel2}!ping@{ping}}
\index{ping@{ping}!dynamixel2@{dynamixel2}}
\subsubsection[{ping}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::ping (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id}
\end{DoxyParamCaption}
)}\label{classdynamixel2_abf94a0932647959fff04aed5c6708f79}

\begin{DoxyCode}
01014 \{
01015     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_af88390c8be18c4079e65fd07b8d553be}{COMM\_TXFAIL};
01016 
01017     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]            = (\textcolor{keywordtype}{unsigned} char)\textcolor{keywordtype}{id};
01018     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}]      = 0x03;
01019     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]      = 0x00;
01020     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}]   = 
      \hyperlink{dynamixel_8h_acb92e93ddd4b53533b14dc3403346bbf}{INST\_PING};
01021 
01022     \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[id].\hyperlink{structdynamixel2_1_1ping__data_a1786b3e1400d2ff8b8361b367b52fbb7}{iModelNo} = -1;
01023     \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[id].\hyperlink{structdynamixel2_1_1ping__data_a869956077eab76548aaffde67817b2bf}{iFirmVer} = -1;
01024 
01025     \hyperlink{classdynamixel2_a2cccd455a52afe99a37b249aa834cdc7}{txrx\_packet}();
01026 
01027     \textcolor{keywordflow}{if}( (\textcolor{keywordtype}{id} != \hyperlink{dynamixel_8h_ab9fe47395310b34fa1ceb112c9ca10e2}{BROADCAST\_ID}) && (\hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} == 
      \hyperlink{dynamixel_8h_a171328d9f298535c18d079f65e631434}{COMM\_RXSUCCESS}) )
01028     \{
01029         \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[id].\hyperlink{structdynamixel2_1_1ping__data_a7c8829a586a920b2abe49719957abd37}{iID}      = id;
01030         \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[id].\hyperlink{structdynamixel2_1_1ping__data_a1786b3e1400d2ff8b8361b367b52fbb7}{iModelNo} = \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}( 
      \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[\hyperlink{dynamixel_8h_a939ef836d0605d2f4f9372df3ea0855f}{PRT1\_PKT\_PARAMETER0}+1], 
      \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[\hyperlink{dynamixel_8h_a939ef836d0605d2f4f9372df3ea0855f}{PRT1\_PKT\_PARAMETER0}+2] );
01031         \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[id].\hyperlink{structdynamixel2_1_1ping__data_a869956077eab76548aaffde67817b2bf}{iFirmVer} = \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a939ef836d0605d2f4f9372df3ea0855f}{PRT1\_PKT\_PARAMETER0}+3];
01032     \}
01033 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_ae7641411f8eea1d9e14afceb303bc93c}{}\index{dynamixel2@{dynamixel2}!read\+\_\+byte@{read\+\_\+byte}}
\index{read\+\_\+byte@{read\+\_\+byte}!dynamixel2@{dynamixel2}}
\subsubsection[{read\+\_\+byte}]{\setlength{\rightskip}{0pt plus 5cm}unsigned char dynamixel2\+::read\+\_\+byte (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{int}]{address}
\end{DoxyParamCaption}
)}\label{classdynamixel2_ae7641411f8eea1d9e14afceb303bc93c}

\begin{DoxyCode}
01105 \{
01106     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} length = 1;
01107     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_af88390c8be18c4079e65fd07b8d553be}{COMM\_TXFAIL}; 
01108 
01109     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]                      = id;
01110     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}]                  = 0x07;
01111     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]                  = 0x00;
01112     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}]                = 
      \hyperlink{dynamixel_8h_a60599b6587736bb05efb8ea3c5e5f87f}{INST\_READ};
01113     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+0
      ]    = (\textcolor{keywordtype}{unsigned} char)\hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(address);
01114     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+1
      ]    = (\textcolor{keywordtype}{unsigned} char)\hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(address);
01115     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+2
      ]    = (\textcolor{keywordtype}{unsigned} char)\hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(length);
01116     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+3
      ]    = (\textcolor{keywordtype}{unsigned} char)\hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(length);
01117 
01118     \hyperlink{classdynamixel2_a2cccd455a52afe99a37b249aa834cdc7}{txrx\_packet}();
01119     \textcolor{comment}{//if(gbCommStatus == COMM\_RXSUCCESS && id != BROADCAST\_ID)}
01120     \textcolor{comment}{//  memmove(data, &rxpacket[PKT\_PARAMETER+1], length);}
01121 
01122     \textcolor{keywordflow}{return} \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[\hyperlink{dynamixel_8h_a7c79167a35ad785b57c7c8de66c59e5c}{PRT2\_STATUS\_PKT\_PARAMETER0}];
01123 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_adb108e5166ba4beee4138e26ef16d1a4}{}\index{dynamixel2@{dynamixel2}!read\+\_\+dword@{read\+\_\+dword}}
\index{read\+\_\+dword@{read\+\_\+dword}!dynamixel2@{dynamixel2}}
\subsubsection[{read\+\_\+dword}]{\setlength{\rightskip}{0pt plus 5cm}unsigned long dynamixel2\+::read\+\_\+dword (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{int}]{address}
\end{DoxyParamCaption}
)}\label{classdynamixel2_adb108e5166ba4beee4138e26ef16d1a4}

\begin{DoxyCode}
01176 \{
01177     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} length = 4;
01178     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_af88390c8be18c4079e65fd07b8d553be}{COMM\_TXFAIL}; 
01179 
01180     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]                      = id;
01181     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}]                  = 0x07;
01182     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]                  = 0x00;
01183     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}]                = 
      \hyperlink{dynamixel_8h_a60599b6587736bb05efb8ea3c5e5f87f}{INST\_READ};
01184     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+0
      ]    = \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(address);
01185     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+1
      ]    = \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(address);
01186     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+2
      ]    = \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(length);
01187     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+3
      ]    = \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(length);
01188 
01189     \hyperlink{classdynamixel2_a2cccd455a52afe99a37b249aa834cdc7}{txrx\_packet}();
01190     \textcolor{comment}{//if(gbCommStatus == COMM\_RXSUCCESS && id != BROADCAST\_ID)}
01191     \textcolor{comment}{//  memmove(data, &rxpacket[PKT\_PARAMETER+1], length);}
01192 
01193     \textcolor{keywordflow}{return} \hyperlink{dynamixel_8h_a84e53a3db3f2ef95c6085d6f3531ae0e}{MAKEDWORD}(\hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD} ( \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a7c79167a35ad785b57c7c8de66c59e5c}{PRT2\_STATUS\_PKT\_PARAMETER0}], \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      PRT2\_STATUS\_PKT\_PARAMETER0+1]),
01194         \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD} ( \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[PRT2\_STATUS\_PKT\_PARAMETER0+2], 
      \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[PRT2\_STATUS\_PKT\_PARAMETER0+3]));
01195 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a9b31ab524b63e309ce9f23fde56eb437}{}\index{dynamixel2@{dynamixel2}!read\+\_\+word@{read\+\_\+word}}
\index{read\+\_\+word@{read\+\_\+word}!dynamixel2@{dynamixel2}}
\subsubsection[{read\+\_\+word}]{\setlength{\rightskip}{0pt plus 5cm}unsigned short dynamixel2\+::read\+\_\+word (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{int}]{address}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a9b31ab524b63e309ce9f23fde56eb437}

\begin{DoxyCode}
01140 \{
01141     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} length = 2;
01142     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_af88390c8be18c4079e65fd07b8d553be}{COMM\_TXFAIL}; 
01143 
01144     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]                      = id;
01145     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}]                  = 0x07;
01146     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]                  = 0x00;
01147     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}]                = 
      \hyperlink{dynamixel_8h_a60599b6587736bb05efb8ea3c5e5f87f}{INST\_READ};
01148     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+0
      ]    = \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(address);
01149     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+1
      ]    = \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(address);
01150     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+2
      ]    = \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(length);
01151     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+3
      ]    = \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(length);
01152 
01153     \hyperlink{classdynamixel2_a2cccd455a52afe99a37b249aa834cdc7}{txrx\_packet}();
01154     \textcolor{comment}{//if(gbCommStatus == COMM\_RXSUCCESS && id != BROADCAST\_ID)}
01155     \textcolor{comment}{//  memmove(data, &rxpacket[PKT\_PARAMETER+1], length);}
01156 
01157     \textcolor{keywordflow}{return} \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD} ( \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a7c79167a35ad785b57c7c8de66c59e5c}{PRT2\_STATUS\_PKT\_PARAMETER0}], \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      PRT2\_STATUS\_PKT\_PARAMETER0+1]);
01158 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a674ea4cce4a1f807c0749ac7eb685cd6}{}\index{dynamixel2@{dynamixel2}!reboot@{reboot}}
\index{reboot@{reboot}!dynamixel2@{dynamixel2}}
\subsubsection[{reboot}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::reboot (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a674ea4cce4a1f807c0749ac7eb685cd6}

\begin{DoxyCode}
01070 \{
01071     \textcolor{keywordflow}{if}(\textcolor{keywordtype}{id} == \hyperlink{dynamixel_8h_ab9fe47395310b34fa1ceb112c9ca10e2}{BROADCAST\_ID})
01072     \{
01073         \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a1bd7c7b30db4f56dc80cef65ad38afff}{COMM\_TXERROR};
01074         \textcolor{keywordflow}{return};
01075     \}
01076 
01077     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]            = (\textcolor{keywordtype}{unsigned} char)\textcolor{keywordtype}{id};
01078     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}]      = 0x03;
01079     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]      = 0x00;
01080     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}]   = 
      \hyperlink{dynamixel_8h_aad0d63532602a783c0e4d6248496c555}{INST\_REBOOT};
01081 
01082     \hyperlink{classdynamixel2_a2cccd455a52afe99a37b249aa834cdc7}{txrx\_packet}();
01083 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a910c7b80ace3a816641468b32c0290a6}{}\index{dynamixel2@{dynamixel2}!remove\+\_\+stuffing@{remove\+\_\+stuffing}}
\index{remove\+\_\+stuffing@{remove\+\_\+stuffing}!dynamixel2@{dynamixel2}}
\subsubsection[{remove\+\_\+stuffing}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::remove\+\_\+stuffing (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a910c7b80ace3a816641468b32c0290a6}

\begin{DoxyCode}
00571 \{
00572     \textcolor{keywordtype}{int} i = 0, index = 0;
00573     \textcolor{keywordtype}{int} packet\_length\_in = \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}], \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]);
00574     \textcolor{keywordtype}{int} packet\_length\_out = packet\_length\_in;
00575 
00576     index = \hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION};
00577     \textcolor{keywordflow}{for}( i = 0; i < packet\_length\_in - 2; i++)  \textcolor{comment}{// except CRC}
00578     \{
00579         \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[i+\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] == 0xFD && 
      \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[i+\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}+1] == 0xFD && 
      \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[i+\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}-1] == 0xFF && 
      \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[i+\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}-2] == 0xFF)
00580         \{   \textcolor{comment}{// FF FF FD FD}
00581             packet\_length\_out--;
00582             i++;
00583         \}
00584         \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[index++] = \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[i+
      \hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}];
00585     \}
00586     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[index++] = \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}+packet\_length\_in-2];
00587     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[index++] = \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}+packet\_length\_in-1];
00588 
00589     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}] = 
      \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(packet\_length\_out);
00590     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}] = 
      \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(packet\_length\_out);
00591 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a7ca03821f030981263c55f2ae2786c4c}{}\index{dynamixel2@{dynamixel2}!rx\+\_\+packet@{rx\+\_\+packet}}
\index{rx\+\_\+packet@{rx\+\_\+packet}!dynamixel2@{dynamixel2}}
\subsubsection[{rx\+\_\+packet}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::rx\+\_\+packet (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a7ca03821f030981263c55f2ae2786c4c}

\begin{DoxyCode}
00650 \{
00651     \textcolor{comment}{//int rx\_length = 0, wait\_length = PRT2\_PKT\_LENGTH\_H + 4 + 1;    // 4 : INST ERROR CHKSUM\_L CHKSUM\_H}
00652     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;
00653     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} crc = 0;
00654 
00655     \hyperlink{classdynamixel2_ad82d286e6b47c7243a3c5fd5ced0ebf4}{gbRxGetLength} = 0; \hyperlink{classdynamixel2_a7ae9bffcc9f4b087c57640881ccbb378}{gbRxPacketLength} = 
      \hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H} + 4 + 1;
00656 
00657     \textcolor{comment}{// Check Bus Using}
00658     \textcolor{comment}{//if(bus\_using == 0)}
00659     \textcolor{comment}{//    return 0;}
00660 
00661     \textcolor{keywordflow}{while}(1)
00662     \{
00663         \hyperlink{classdynamixel2_ad82d286e6b47c7243a3c5fd5ced0ebf4}{gbRxGetLength} += \hyperlink{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{dH}.\hyperlink{classdxl__hal_ac36331febb2eaa66303af3483795742a}{read}( &\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{classdynamixel2_ad82d286e6b47c7243a3c5fd5ced0ebf4}{gbRxGetLength}], \hyperlink{classdynamixel2_a7ae9bffcc9f4b087c57640881ccbb378}{gbRxPacketLength} - gbRxGetLength);
00664         \textcolor{keywordflow}{if}(gbRxGetLength >= \hyperlink{classdynamixel2_a7ae9bffcc9f4b087c57640881ccbb378}{gbRxPacketLength})    \textcolor{comment}{// wait\_length minimum : 11}
00665         \{
00666             \textcolor{comment}{// Find packet header}
00667             \textcolor{keywordflow}{for}(i = 0; i < (gbRxGetLength - 2); i++)
00668             \{
00669                 \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[i] == 0xFF && \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[i+1] == 0xFF && 
      \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[i+2] == 0xFD)
00670                     \textcolor{keywordflow}{break};
00671             \}
00672 
00673             \textcolor{keywordflow}{if}(i == 0)
00674             \{
00675                 \textcolor{comment}{// Check length}
00676                 \hyperlink{classdynamixel2_a7ae9bffcc9f4b087c57640881ccbb378}{gbRxPacketLength} = \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(
      \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}], \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]) + \hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H} + 1;
00677                 \textcolor{keywordflow}{if}(gbRxGetLength < \hyperlink{classdynamixel2_a7ae9bffcc9f4b087c57640881ccbb378}{gbRxPacketLength})
00678                 \{
00679                     \textcolor{comment}{// Check timeout}
00680                     \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a4c996c0d9edcfd320906674512837a9e}{is\_packet\_timeout}() == 1)
00681                     \{
00682                         \textcolor{keywordflow}{if}(gbRxGetLength == 0)
00683                             \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_af9976398353d104bb8a78b1f02f9fceb}{COMM\_RXTIMEOUT};
00684                         \textcolor{keywordflow}{else}
00685                             \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a93c30bd345d8077112f0a3524d26278b}{COMM\_RXCORRUPT};
00686                         \hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} = 0;
00687                         \textcolor{keywordflow}{break};
00688                     \}
00689                     \textcolor{keywordflow}{continue};
00690                 \}
00691 
00692                 \textcolor{comment}{// Check CRC16}
00693                 crc = \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{classdynamixel2_a7ae9bffcc9f4b087c57640881ccbb378}{gbRxPacketLength}-2], \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{classdynamixel2_a7ae9bffcc9f4b087c57640881ccbb378}{gbRxPacketLength}-1]);
00694                 \textcolor{keywordflow}{if}(\hyperlink{dynamixel_8cpp_a7f337b20cce27fe165340db4ede5e404}{update\_crc}(0, \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}, 
      \hyperlink{classdynamixel2_a7ae9bffcc9f4b087c57640881ccbb378}{gbRxPacketLength}-2) == crc) \textcolor{comment}{// -2 : except CRC16}
00695                     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a171328d9f298535c18d079f65e631434}{COMM\_RXSUCCESS};
00696                 \textcolor{keywordflow}{else}
00697                     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a93c30bd345d8077112f0a3524d26278b}{COMM\_RXCORRUPT};
00698                 \hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} = 0;
00699                 \textcolor{keywordflow}{break};
00700             \}
00701             \textcolor{keywordflow}{else}
00702             \{
00703                 \textcolor{comment}{// Remove unnecessary packets}
00704                 memmove(&\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[0], &\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[i], gbRxGetLength -
       i);
00705                 gbRxGetLength -= i;
00706             \}
00707         \}
00708         \textcolor{keywordflow}{else}
00709         \{
00710             \textcolor{comment}{// Check timeout}
00711             \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a4c996c0d9edcfd320906674512837a9e}{is\_packet\_timeout}() == 1)
00712             \{
00713                 \textcolor{keywordflow}{if}(gbRxGetLength == 0)
00714                     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_af9976398353d104bb8a78b1f02f9fceb}{COMM\_RXTIMEOUT};
00715                 \textcolor{keywordflow}{else}
00716                     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a93c30bd345d8077112f0a3524d26278b}{COMM\_RXCORRUPT};
00717                 \hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} = 0;
00718                 \textcolor{keywordflow}{break};
00719             \}
00720         \}
00721     \}
00722 
00723     \textcolor{comment}{// Character stuffing}
00724     \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} == \hyperlink{dynamixel_8h_a171328d9f298535c18d079f65e631434}{COMM\_RXSUCCESS})
00725         \hyperlink{classdynamixel2_a910c7b80ace3a816641468b32c0290a6}{remove\_stuffing}();
00726 
00727     \hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} = 0;
00728 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a132d723a321ba225f75f2c79e5d4d27b}{}\index{dynamixel2@{dynamixel2}!set\+\_\+packet\+\_\+timeout@{set\+\_\+packet\+\_\+timeout}}
\index{set\+\_\+packet\+\_\+timeout@{set\+\_\+packet\+\_\+timeout}!dynamixel2@{dynamixel2}}
\subsubsection[{set\+\_\+packet\+\_\+timeout}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::set\+\_\+packet\+\_\+timeout (
\begin{DoxyParamCaption}
\item[{int}]{Num\+Rcv\+Byte}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a132d723a321ba225f75f2c79e5d4d27b}

\begin{DoxyCode}
00459 \{
00460     \hyperlink{classdynamixel2_ac9746f2c7ed6d706152d6d0d502993c0}{gdPacketStartTime} = \hyperlink{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{dH}.\hyperlink{classdxl__hal_a6b6b7381c45308662fc3df6e7f74bc61}{get\_curr\_time}();
00461     \hyperlink{classdynamixel2_ae7b830369861e191120f9b310a68e2d8}{gdRcvWaitTime} = (\hyperlink{classdynamixel2_a786e818a88ec65d3b7e2f30b55ec31ba}{gdByteTransTime}*(double)NumRcvByte + 2.0*
      \hyperlink{dynamixel_8cpp_a2e9c6f904bb36a29afe5172bad1edc42}{LATENCY\_TIME} + 2.0);
00462 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a7d85d44aa6c1fe51f952f395a79296d5}{}\index{dynamixel2@{dynamixel2}!set\+\_\+packet\+\_\+timeout\+\_\+ms@{set\+\_\+packet\+\_\+timeout\+\_\+ms}}
\index{set\+\_\+packet\+\_\+timeout\+\_\+ms@{set\+\_\+packet\+\_\+timeout\+\_\+ms}!dynamixel2@{dynamixel2}}
\subsubsection[{set\+\_\+packet\+\_\+timeout\+\_\+ms}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::set\+\_\+packet\+\_\+timeout\+\_\+ms (
\begin{DoxyParamCaption}
\item[{int}]{msec}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a7d85d44aa6c1fe51f952f395a79296d5}

\begin{DoxyCode}
00465 \{
00466     \hyperlink{classdynamixel2_ac9746f2c7ed6d706152d6d0d502993c0}{gdPacketStartTime} = \hyperlink{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{dH}.\hyperlink{classdxl__hal_a6b6b7381c45308662fc3df6e7f74bc61}{get\_curr\_time}();
00467     \hyperlink{classdynamixel2_ae7b830369861e191120f9b310a68e2d8}{gdRcvWaitTime} = (double)msec;
00468 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a78e147772e166a87d8e64656843d9e37}{}\index{dynamixel2@{dynamixel2}!set\+\_\+txpacket\+\_\+id@{set\+\_\+txpacket\+\_\+id}}
\index{set\+\_\+txpacket\+\_\+id@{set\+\_\+txpacket\+\_\+id}!dynamixel2@{dynamixel2}}
\subsubsection[{set\+\_\+txpacket\+\_\+id}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::set\+\_\+txpacket\+\_\+id (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a78e147772e166a87d8e64656843d9e37}

\begin{DoxyCode}
00978 \{
00979     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}] = id;
00980 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a86ac906e5b548649510366ca978aed05}{}\index{dynamixel2@{dynamixel2}!set\+\_\+txpacket\+\_\+instruction@{set\+\_\+txpacket\+\_\+instruction}}
\index{set\+\_\+txpacket\+\_\+instruction@{set\+\_\+txpacket\+\_\+instruction}!dynamixel2@{dynamixel2}}
\subsubsection[{set\+\_\+txpacket\+\_\+instruction}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::set\+\_\+txpacket\+\_\+instruction (
\begin{DoxyParamCaption}
\item[{unsigned char}]{instruction}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a86ac906e5b548649510366ca978aed05}

\begin{DoxyCode}
00983 \{
00984     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] = (\textcolor{keywordtype}{unsigned} char)
      instruction;
00985 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a2831a22a03d36e4590c9ad368efa10cf}{}\index{dynamixel2@{dynamixel2}!set\+\_\+txpacket\+\_\+length@{set\+\_\+txpacket\+\_\+length}}
\index{set\+\_\+txpacket\+\_\+length@{set\+\_\+txpacket\+\_\+length}!dynamixel2@{dynamixel2}}
\subsubsection[{set\+\_\+txpacket\+\_\+length}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::set\+\_\+txpacket\+\_\+length (
\begin{DoxyParamCaption}
\item[{unsigned short}]{length}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a2831a22a03d36e4590c9ad368efa10cf}

\begin{DoxyCode}
00993 \{
00994     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}] = 
      \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(length);
00995     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}] = 
      \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(length);
00996 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a4737bc55c853cedb5102d5c38ab1a1b5}{}\index{dynamixel2@{dynamixel2}!set\+\_\+txpacket\+\_\+parameter@{set\+\_\+txpacket\+\_\+parameter}}
\index{set\+\_\+txpacket\+\_\+parameter@{set\+\_\+txpacket\+\_\+parameter}!dynamixel2@{dynamixel2}}
\subsubsection[{set\+\_\+txpacket\+\_\+parameter}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::set\+\_\+txpacket\+\_\+parameter (
\begin{DoxyParamCaption}
\item[{unsigned short}]{index, }
\item[{unsigned char}]{value}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a4737bc55c853cedb5102d5c38ab1a1b5}

\begin{DoxyCode}
00988 \{
00989     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+
      index] = value;
00990 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a84d998585aab4e92413220ca5b489a0a}{}\index{dynamixel2@{dynamixel2}!terminate@{terminate}}
\index{terminate@{terminate}!dynamixel2@{dynamixel2}}
\subsubsection[{terminate}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel2\+::terminate (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a84d998585aab4e92413220ca5b489a0a}

\begin{DoxyCode}
00423 \{
00424     \textcolor{keywordtype}{int} \textcolor{keywordtype}{id} = 0;
00425     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{id} = 0; \textcolor{keywordtype}{id} <= \hyperlink{dynamixel_8h_a1cdef4472847c938fc165b7d2737c4e4}{MAX\_ID}; \textcolor{keywordtype}{id}++)
00426     \{
00427         \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].pucTable != 0)
00428             free((\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].pucTable));
00429 
00430         \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].pucTable != 0)
00431             free((\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].pucTable));
00432     \}
00433     \hyperlink{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{dH}.\hyperlink{classdxl__hal_a250fd7e4acabf54d0733551a13e89a2d}{close}();
00434     \textcolor{keywordflow}{return} 0;
00435 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a526e395e15fbf50ffbc8ce0853b08233}{}\index{dynamixel2@{dynamixel2}!tx\+\_\+packet@{tx\+\_\+packet}}
\index{tx\+\_\+packet@{tx\+\_\+packet}!dynamixel2@{dynamixel2}}
\subsubsection[{tx\+\_\+packet}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::tx\+\_\+packet (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a526e395e15fbf50ffbc8ce0853b08233}

\begin{DoxyCode}
00595 \{
00596     \textcolor{keywordtype}{int} packet\_tx\_len, real\_tx\_len;
00597     \textcolor{keywordtype}{int} length;
00598     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} crc = 0;
00599 
00600 
00601     \textcolor{comment}{// Check Bus Using}
00602     \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} == 1)
00603     \{
00604         \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_af88390c8be18c4079e65fd07b8d553be}{COMM\_TXFAIL};
00605         \textcolor{keywordflow}{return};
00606     \}
00607     \hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} = 1;
00608 
00609     \textcolor{comment}{// Character stuffing}
00610     \hyperlink{classdynamixel2_a350920b911d0ad2116b91f2149b840c7}{add\_stuffing}();
00611     \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} == \hyperlink{dynamixel_8h_a1bd7c7b30db4f56dc80cef65ad38afff}{COMM\_TXERROR})
00612         \textcolor{keywordflow}{return};
00613 
00614     length = \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}], \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]);
00615 
00616     \textcolor{comment}{// Check MAX packet length}
00617     \textcolor{keywordflow}{if}(length > (\hyperlink{dxl__hal_8h_ad753363487043da5d9fdd3fd1071f59e}{MAXNUM\_TXPACKET}))
00618     \{
00619         \hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} = 0;
00620         \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a1bd7c7b30db4f56dc80cef65ad38afff}{COMM\_TXERROR};
00621         \textcolor{keywordflow}{return};
00622     \}
00623 
00624     \textcolor{comment}{// Packet Header}
00625     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_ab65834fcbbcf4701f1f4569d664ccdda}{PRT2\_PKT\_HEADER0}]   = 0xFF;
00626     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a75438118bc73a597bf0f83c9fcb2a49c}{PRT2\_PKT\_HEADER1}]   = 0xFF;
00627     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a7859877a1efdc93afffea61c243a3254}{PRT2\_PKT\_HEADER2}]   = 0xFD;
00628     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_ae35474360c50fe2f0a33f00f0e42880e}{PRT2\_PKT\_RESERVED}]  = 0x00; \textcolor{comment}{// RESERVED}
00629 
00630     \textcolor{comment}{// Add CRC16}
00631     crc = \hyperlink{dynamixel_8cpp_a7f337b20cce27fe165340db4ede5e404}{update\_crc}(0, \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}, length+
      \hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}+1-2);  \textcolor{comment}{// -2 : except CRC16}
00632     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[length+\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}-1] = 
      \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(crc);     \textcolor{comment}{// last - 1}
00633     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[length+\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}-0] = 
      \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(crc);     \textcolor{comment}{// last - 0}
00634 
00635     \textcolor{comment}{// Tx Packet}
00636     \hyperlink{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{dH}.\hyperlink{classdxl__hal_a004eedde5af69219d7288ec8ea97c89f}{clear}();
00637     packet\_tx\_len = length + \hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H} + 1;
00638     real\_tx\_len = \hyperlink{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{dH}.\hyperlink{classdxl__hal_a90106970438fb0ab65852730a1c0776a}{write}(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}, packet\_tx\_len );
00639     \textcolor{keywordflow}{if}( packet\_tx\_len != real\_tx\_len )
00640     \{
00641         \hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} = 0;
00642         \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_af88390c8be18c4079e65fd07b8d553be}{COMM\_TXFAIL};
00643         \textcolor{keywordflow}{return};
00644     \}
00645     
00646     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_aac6d30f996256b24d311de81eb0f0c1e}{COMM\_TXSUCCESS};
00647 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a2cccd455a52afe99a37b249aa834cdc7}{}\index{dynamixel2@{dynamixel2}!txrx\+\_\+packet@{txrx\+\_\+packet}}
\index{txrx\+\_\+packet@{txrx\+\_\+packet}!dynamixel2@{dynamixel2}}
\subsubsection[{txrx\+\_\+packet}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::txrx\+\_\+packet (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a2cccd455a52afe99a37b249aa834cdc7}

\begin{DoxyCode}
00731 \{
00732     \textcolor{keywordtype}{int} n = 0, num = 0;
00733     \textcolor{keywordtype}{int} \textcolor{keywordtype}{id} = 0;
00734     \textcolor{keywordtype}{int} wait\_length = 0;
00735     \textcolor{keywordtype}{int} data\_length = 0;
00736     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_af88390c8be18c4079e65fd07b8d553be}{COMM\_TXFAIL};
00737     
00738     \textcolor{comment}{// Wait for Bus Idle}
00739     \textcolor{keywordflow}{while}(\hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} == 1) 
00740     \{
00741         \textcolor{comment}{//Sleep(0);}
00742     \}
00743                                                                         
00744     \textcolor{keywordflow}{if}( ( \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] != 
      \hyperlink{dynamixel_8h_acb92e93ddd4b53533b14dc3403346bbf}{INST\_PING}       )  &&
00745         ( \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] != 
      \hyperlink{dynamixel_8h_a60599b6587736bb05efb8ea3c5e5f87f}{INST\_READ}       )  &&
00746         ( \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] != 
      \hyperlink{dynamixel_8h_a1c304d06170982719fd605a87c9101f0}{INST\_WRITE}         )  &&
00747         ( \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] != 
      \hyperlink{dynamixel_8h_ae2afd415cd9007f4688bf77507f0383e}{INST\_REG\_WRITE}     )  &&
00748         ( \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] != 
      \hyperlink{dynamixel_8h_adea21b73305aa7a5b3317e299c616853}{INST\_ACTION}       )  &&
00749         ( \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] != 
      \hyperlink{dynamixel_8h_ad670526ca941302efb4a0d00e7dd43c0}{INST\_RESET}         )  &&
00750         ( \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] != 
      \hyperlink{dynamixel_8h_aeaa4b61ee11d45bd1a0cb932d7abaf77}{INST\_SYNC\_WRITE}   )  &&
00751         ( \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] != 
      \hyperlink{dynamixel_8h_a7967a17d10e9100ffb48ca542ba7587f}{INST\_BULK\_READ}    )  &&
00752         ( \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] != 
      \hyperlink{dynamixel_8h_aad0d63532602a783c0e4d6248496c555}{INST\_REBOOT}       )  &&
00753         ( \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] != 
      \hyperlink{dynamixel_8h_ad64f9506dd447c94c75405ecae867b87}{INST\_STATUS}       )  &&
00754         ( \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] != 
      \hyperlink{dynamixel_8h_a2c0994e6f77bcf585d7dfde88c10441f}{INST\_SYNC\_READ}    )  &&
00755         ( \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] != 
      \hyperlink{dynamixel_8h_a54f0a35d92b5238ca86cf770198cc1bf}{INST\_BULK\_WRITE}   ) )
00756     \{
00757         \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a1bd7c7b30db4f56dc80cef65ad38afff}{COMM\_TXERROR};
00758         \textcolor{keywordflow}{return};
00759     \}
00760 
00761     
00762 
00763     \textcolor{comment}{//if( (gbInstructionPacket[PRT2\_PKT\_INSTRUCTION] != INST\_SYNC\_READ) &&
       (gbInstructionPacket[PRT2\_PKT\_INSTRUCTION] != INST\_BULK\_READ) )}
00764     \textcolor{keywordflow}{if}( (\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}] != 
      \hyperlink{dynamixel_8h_ab9fe47395310b34fa1ceb112c9ca10e2}{BROADCAST\_ID}) )
00765     \{
00766         \hyperlink{classdynamixel2_a526e395e15fbf50ffbc8ce0853b08233}{tx\_packet}();
00767         \textcolor{comment}{// Check Tx packet result}
00768         \textcolor{keywordflow}{if}( \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} != \hyperlink{dynamixel_8h_aac6d30f996256b24d311de81eb0f0c1e}{COMM\_TXSUCCESS} )
00769             \textcolor{keywordflow}{return};
00770 
00771         \textcolor{comment}{// Set Rx Timeout}
00772         \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] == 
      \hyperlink{dynamixel_8h_a60599b6587736bb05efb8ea3c5e5f87f}{INST\_READ})
00773             \hyperlink{classdynamixel2_a132d723a321ba225f75f2c79e5d4d27b}{set\_packet\_timeout}(\hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(
      \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+2], 
      \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+3]) +
       11);
00774         \textcolor{keywordflow}{else}
00775             \hyperlink{classdynamixel2_a132d723a321ba225f75f2c79e5d4d27b}{set\_packet\_timeout}(\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}+4+1);    \textcolor{comment}{// 4 : INST
       ERROR CHKSUM\_L CHKSUM\_H}
00776 
00778         \textcolor{comment}{//if(gbInstructionPacket[PRT2\_PKT\_ID] == BROADCAST\_ID)}
00779         \textcolor{comment}{//\{}
00780         \textcolor{comment}{//  giBusUsing = 0;}
00781         \textcolor{comment}{//  gbCommStatus = COMM\_RXSUCCESS;}
00782         \textcolor{comment}{//  return;}
00783         \textcolor{comment}{//\}}
00784 
00785         \hyperlink{classdynamixel2_a7ca03821f030981263c55f2ae2786c4c}{rx\_packet}();
00786         \textcolor{keywordflow}{if}((\hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} == \hyperlink{dynamixel_8h_a171328d9f298535c18d079f65e631434}{COMM\_RXSUCCESS}) && (
      \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}] != \hyperlink{dynamixel_8h_ab9fe47395310b34fa1ceb112c9ca10e2}{BROADCAST\_ID}) && (
      \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}] != \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]))
00787             \hyperlink{classdynamixel2_a7ca03821f030981263c55f2ae2786c4c}{rx\_packet}();
00788     \}
00789     \textcolor{keywordflow}{else}
00790     \{
00791         \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] == 
      \hyperlink{dynamixel_8h_a7967a17d10e9100ffb48ca542ba7587f}{INST\_BULK\_READ} )
00792         \{
00793             num = (\hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}], \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]) - 3 )/5;
00794             \textcolor{keywordflow}{for}(n = 0; n < num; n++)
00795             \{
00796                 \textcolor{keywordtype}{id} = \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0} + n*5];
00797                 \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[id].\hyperlink{structdynamixel2_1_1data_a1c974bc78558d2a55f9a7c647cbb36f5}{iError} = -1;
00798                 \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[id].\hyperlink{structdynamixel2_1_1data_adfeca69c1b405b26a9381d53e3954156}{iStartAddr} = \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(
      \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0} + n*5
       + 1], 
00799                                                         \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0} + n*5 + 2]);
00800                 \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[id].\hyperlink{structdynamixel2_1_1data_a7d8d57614c387663f0658bbf4b7a69eb}{iLength}    = \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(
      \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0} + n*5
       + 3], 
00801                                                         \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0} + n*5 + 4]);
00802 
00803                 \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].pucTable != 0)
00804                     free((\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].pucTable));
00805 
00806                 \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[id].\hyperlink{structdynamixel2_1_1data_ae06fa51258979434fbc9f0e128824950}{pucTable} = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}*) calloc(
      \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iLength, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}));
00807                 wait\_length += \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[id].\hyperlink{structdynamixel2_1_1data_a7d8d57614c387663f0658bbf4b7a69eb}{iLength} + 11;
00808             \}
00809 
00810             \textcolor{keywordflow}{while}(\hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} == 1) 
00811             \{
00812                 \textcolor{comment}{//Sleep(0);}
00813             \}
00814             \hyperlink{classdynamixel2_a526e395e15fbf50ffbc8ce0853b08233}{tx\_packet}();
00815             \textcolor{keywordflow}{if}( \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} != \hyperlink{dynamixel_8h_aac6d30f996256b24d311de81eb0f0c1e}{COMM\_TXSUCCESS} )
00816                 \textcolor{keywordflow}{return};
00817             
00818             \hyperlink{classdynamixel2_a132d723a321ba225f75f2c79e5d4d27b}{set\_packet\_timeout}(wait\_length);
00819 
00820             \textcolor{keywordflow}{for}(n = 0; n < num; n++)
00821             \{
00822                 \textcolor{keywordtype}{id} = \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0} + n*5];
00823                 \textcolor{comment}{// Rx packet}
00824                 \hyperlink{classdynamixel2_a7ca03821f030981263c55f2ae2786c4c}{rx\_packet}();
00825                 \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} == \hyperlink{dynamixel_8h_a171328d9f298535c18d079f65e631434}{COMM\_RXSUCCESS})
00826                     \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[id].\hyperlink{structdynamixel2_1_1data_a1c974bc78558d2a55f9a7c647cbb36f5}{iError} = \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a3bb6395e5d1d539b3027a16120f7c337}{PRT2\_PKT\_ERRBIT}];
00827                 \textcolor{comment}{// rxpacket to rxdata[id]->pucTable}
00828                 memcpy(\hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].pucTable, &\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a7c79167a35ad785b57c7c8de66c59e5c}{PRT2\_STATUS\_PKT\_PARAMETER0}], \hyperlink{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{gBulkData}[\textcolor{keywordtype}{id}].iLength);
00829             \}
00830         \}
00831         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] == 
      \hyperlink{dynamixel_8h_a2c0994e6f77bcf585d7dfde88c10441f}{INST\_SYNC\_READ})
00832         \{
00833             num = (\hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}], \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]) - 3 - 4); \textcolor{comment}{//3 : INST  CRC\_L CRC H, 4 : param0->addr\_l param0->addr\_h
       param0->length\_l param0->length\_h }
00834             data\_length = \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+2], 
00835                 \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+3]);
00836 
00837 
00838             \textcolor{keywordflow}{for}(n = 0; n < num; n++)
00839             \{
00840                 \textcolor{keywordtype}{id} = \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0} + 4 + n];
00841                 \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[id].\hyperlink{structdynamixel2_1_1data_ab60c037af9dfe1f3c62f15d0581a5837}{iID} = id;
00842                 \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[id].\hyperlink{structdynamixel2_1_1data_adfeca69c1b405b26a9381d53e3954156}{iStartAddr} = \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(
      \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0} + 0],
       
00843                                                         \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0} + 1]);
00844                 \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[id].\hyperlink{structdynamixel2_1_1data_a1c974bc78558d2a55f9a7c647cbb36f5}{iError} = -1;
00845                 \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].pucTable != 0)
00846                     free((\hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].pucTable));
00847 
00848                 \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[id].\hyperlink{structdynamixel2_1_1data_ae06fa51258979434fbc9f0e128824950}{pucTable} = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) calloc(data\_length, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{
      unsigned} \textcolor{keywordtype}{char}));
00849             \}
00850 
00851 
00852             wait\_length  = 11 + data\_length;
00853             wait\_length *= num;
00854 
00855             \textcolor{keywordflow}{while}(\hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} == 1);
00856 
00857             \hyperlink{classdynamixel2_a526e395e15fbf50ffbc8ce0853b08233}{tx\_packet}();
00858 
00859             \textcolor{comment}{// Check Tx packet result}
00860             \textcolor{keywordflow}{if}( \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} != \hyperlink{dynamixel_8h_aac6d30f996256b24d311de81eb0f0c1e}{COMM\_TXSUCCESS} )
00861                 \textcolor{keywordflow}{return};
00862 
00863             \textcolor{comment}{// Set Rx Timeout (SYNK\_READ)}
00864             \hyperlink{classdynamixel2_a132d723a321ba225f75f2c79e5d4d27b}{set\_packet\_timeout}(wait\_length);
00865 
00866             \textcolor{keywordflow}{for}(n = 0; n < num; n++)
00867             \{
00868                 \textcolor{keywordtype}{id} = \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[
      \hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0} + 4 + n];
00869                 \textcolor{comment}{// Rx packet}
00870                 \hyperlink{classdynamixel2_a7ca03821f030981263c55f2ae2786c4c}{rx\_packet}();
00871                 \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} == \hyperlink{dynamixel_8h_a171328d9f298535c18d079f65e631434}{COMM\_RXSUCCESS})
00872                     \hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[id].\hyperlink{structdynamixel2_1_1data_a1c974bc78558d2a55f9a7c647cbb36f5}{iError} = \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a3bb6395e5d1d539b3027a16120f7c337}{PRT2\_PKT\_ERRBIT}];
00873                 \textcolor{comment}{// rxpacket to rxdata[id]->pucTable}
00874                 memcpy(\hyperlink{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{gSyncData}[\textcolor{keywordtype}{id}].pucTable, &\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a7c79167a35ad785b57c7c8de66c59e5c}{PRT2\_STATUS\_PKT\_PARAMETER0}], data\_length);
00875             \}
00876 
00877             \textcolor{keywordflow}{return};
00878         \}
00879         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}] == 
      \hyperlink{dynamixel_8h_acb92e93ddd4b53533b14dc3403346bbf}{INST\_PING})
00880         \{
00881             \textcolor{keywordtype}{int} rx\_length = 0;
00882             \hyperlink{classdynamixel2_a526e395e15fbf50ffbc8ce0853b08233}{tx\_packet}();
00883             \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} != \hyperlink{dynamixel_8h_aac6d30f996256b24d311de81eb0f0c1e}{COMM\_TXSUCCESS})
00884             \{
00885                 \hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} = 0;
00886                 \textcolor{keywordflow}{return};
00887             \}
00888 
00889             wait\_length = \hyperlink{dynamixel_8cpp_aedac6609b233fa877f86b3804204a2fe}{PING\_STATUS\_LENGTH} * \hyperlink{dynamixel_8h_a1cdef4472847c938fc165b7d2737c4e4}{MAX\_ID};
00890             \hyperlink{classdynamixel2_a7d85d44aa6c1fe51f952f395a79296d5}{set\_packet\_timeout\_ms}((\textcolor{keywordtype}{int})((\hyperlink{classdynamixel2_a786e818a88ec65d3b7e2f30b55ec31ba}{gdByteTransTime} * wait\_length)
       + (3 * MAX\_ID) + 2 * \hyperlink{dynamixel_8cpp_a2e9c6f904bb36a29afe5172bad1edc42}{LATENCY\_TIME}));
00891 
00892             \textcolor{keywordflow}{while}(1)
00893             \{
00894                 \textcolor{keywordtype}{int} \_cnt = \hyperlink{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{dH}.\hyperlink{classdxl__hal_ac36331febb2eaa66303af3483795742a}{read}(&\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[rx\_length], wait\_length - rx\_length)
      ;
00895                 \textcolor{keywordflow}{if}(\_cnt > 0)
00896                 \{
00897                     rx\_length += \_cnt;
00898                     \textcolor{comment}{//printf("cnt : %d, Interval : %f / Wait time : %f\(\backslash\)n", \_cnt,  get\_packet\_time(),
       gdPacketWaitTime);}
00899                 \}
00900                 \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a4c996c0d9edcfd320906674512837a9e}{is\_packet\_timeout}() == 1 || rx\_length >= wait\_length)
00901                     \textcolor{keywordflow}{break};
00902             \}
00903             \hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} = 0;
00904 
00905             \textcolor{keywordflow}{if}(rx\_length== 0)
00906             \{
00907                 \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_af9976398353d104bb8a78b1f02f9fceb}{COMM\_RXTIMEOUT};
00908                 \textcolor{keywordflow}{return};
00909             \}
00910 
00911             \textcolor{keywordflow}{while}(1)
00912             \{
00913                 \textcolor{keywordtype}{int} idx = 0;
00914 
00915                 \textcolor{keywordflow}{if}(rx\_length < \hyperlink{dynamixel_8cpp_aedac6609b233fa877f86b3804204a2fe}{PING\_STATUS\_LENGTH})
00916                 \{
00917                     \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a93c30bd345d8077112f0a3524d26278b}{COMM\_RXCORRUPT};
00918                     \textcolor{keywordflow}{return};
00919                 \}
00920 
00921                 \textcolor{comment}{// find packet header}
00922                 \textcolor{keywordflow}{while}( idx < (rx\_length - 2) )
00923                 \{
00924                     \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[idx] == 0xFF && 
      \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[idx + 1] == 0xFF && \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[idx + 2] == 0xFD)
00925                         \textcolor{keywordflow}{break};
00926                     \textcolor{keywordflow}{else}
00927                         idx++;
00928                 \}
00929 
00930                 \textcolor{keywordflow}{if}(idx == 0)
00931                 \{
00932                     \textcolor{comment}{// check CRC16}
00933                     \textcolor{keywordtype}{int} crc = \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8cpp_aedac6609b233fa877f86b3804204a2fe}{PING\_STATUS\_LENGTH} - 2], \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8cpp_aedac6609b233fa877f86b3804204a2fe}{PING\_STATUS\_LENGTH} - 1]);
00934                     \textcolor{keywordflow}{if}(\hyperlink{dynamixel_8cpp_a7f337b20cce27fe165340db4ede5e404}{update\_crc}(0, \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}, 
      \hyperlink{dynamixel_8cpp_aedac6609b233fa877f86b3804204a2fe}{PING\_STATUS\_LENGTH} - 2) == crc) \textcolor{comment}{// - 2 : except CRC16}
00935                     \{
00936                         \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]].\hyperlink{structdynamixel2_1_1ping__data_a7c8829a586a920b2abe49719957abd37}{iID} = \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}];
00937                         \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]].\hyperlink{structdynamixel2_1_1ping__data_a1786b3e1400d2ff8b8361b367b52fbb7}{iModelNo} = \hyperlink{dynamixel_8h_a6b98c16b8e3e7733dd4063d0b0fac24c}{MAKEWORD}(\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a7c79167a35ad785b57c7c8de66c59e5c}{PRT2\_STATUS\_PKT\_PARAMETER0}], \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      PRT2\_STATUS\_PKT\_PARAMETER0+1]);
00938                         \hyperlink{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{gPingData}[\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]].\hyperlink{structdynamixel2_1_1ping__data_a869956077eab76548aaffde67817b2bf}{iFirmVer} = \hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8h_a7c79167a35ad785b57c7c8de66c59e5c}{PRT2\_STATUS\_PKT\_PARAMETER0}+2];
00939 
00940                         memcpy(&\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[0], &\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[
      \hyperlink{dynamixel_8cpp_aedac6609b233fa877f86b3804204a2fe}{PING\_STATUS\_LENGTH}], rx\_length - PING\_STATUS\_LENGTH);
00941                         rx\_length -= \hyperlink{dynamixel_8cpp_aedac6609b233fa877f86b3804204a2fe}{PING\_STATUS\_LENGTH};
00942                     \}
00943                     \textcolor{keywordflow}{else}
00944                     \{
00945                         \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a93c30bd345d8077112f0a3524d26278b}{COMM\_RXCORRUPT};
00946 
00947                         \textcolor{comment}{// remove header (0xFF 0xFF 0xFD)}
00948                         memcpy(&\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[0], &\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[3], 
      rx\_length - 3); 
00949                         rx\_length -= 3;
00950                     \}
00951 
00952                     \textcolor{keywordflow}{if}(rx\_length < \hyperlink{dynamixel_8cpp_aedac6609b233fa877f86b3804204a2fe}{PING\_STATUS\_LENGTH})
00953                         \textcolor{keywordflow}{break};
00954                 \}
00955                 \textcolor{keywordflow}{else}
00956                 \{
00957                     \textcolor{comment}{// remove unnecessary packets}
00958                     memcpy(&\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[0], &\hyperlink{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{gbStatusPacket}[idx], rx\_length 
      - idx);
00959                     rx\_length -= idx;
00960                 \}
00961             \}
00962         \}
00963         \textcolor{keywordflow}{else} \textcolor{comment}{// Sync\_Write ans Bulk Write}
00964         \{
00965             \hyperlink{classdynamixel2_a526e395e15fbf50ffbc8ce0853b08233}{tx\_packet}();
00966             \hyperlink{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{giBusUsing} = 0;
00967             \textcolor{keywordflow}{if}(\hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} == \hyperlink{dynamixel_8h_aac6d30f996256b24d311de81eb0f0c1e}{COMM\_TXSUCCESS})
00968                 \hyperlink{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{gbCommStatus} = \hyperlink{dynamixel_8h_a171328d9f298535c18d079f65e631434}{COMM\_RXSUCCESS};
00969             \textcolor{keywordflow}{return};
00970         \}
00971     \}
00972 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_ae511ba1af88cae4f3307d50242491011}{}\index{dynamixel2@{dynamixel2}!write\+\_\+byte@{write\+\_\+byte}}
\index{write\+\_\+byte@{write\+\_\+byte}!dynamixel2@{dynamixel2}}
\subsubsection[{write\+\_\+byte}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::write\+\_\+byte (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{int}]{address, }
\item[{unsigned char}]{value}
\end{DoxyParamCaption}
)}\label{classdynamixel2_ae511ba1af88cae4f3307d50242491011}

\begin{DoxyCode}
01126 \{
01127     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} length = 1;
01128     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]                      = id;
01129     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}]                  = 
      \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(length+5);
01130     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]                  = 
      \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(length+5);
01131     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}]                = 
      \hyperlink{dynamixel_8h_a1c304d06170982719fd605a87c9101f0}{INST\_WRITE};
01132     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+0
      ]    = \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(address);
01133     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+1
      ]    = \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(address);
01134     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+2
      ]    = (\textcolor{keywordtype}{unsigned} char)value;
01135     
01136     \hyperlink{classdynamixel2_a2cccd455a52afe99a37b249aa834cdc7}{txrx\_packet}();
01137 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_a502f5c430f5370ab7f158204c5631ac7}{}\index{dynamixel2@{dynamixel2}!write\+\_\+dword@{write\+\_\+dword}}
\index{write\+\_\+dword@{write\+\_\+dword}!dynamixel2@{dynamixel2}}
\subsubsection[{write\+\_\+dword}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::write\+\_\+dword (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{int}]{address, }
\item[{unsigned long}]{value}
\end{DoxyParamCaption}
)}\label{classdynamixel2_a502f5c430f5370ab7f158204c5631ac7}

\begin{DoxyCode}
01198 \{
01199     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} length = 4;
01200     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]                      = id;
01201     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}]                  = 
      \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(length+5);
01202     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]                  = 
      \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(length+5);
01203     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}]                = 
      \hyperlink{dynamixel_8h_a1c304d06170982719fd605a87c9101f0}{INST\_WRITE};
01204     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+0
      ]    = \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(address);
01205     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+1
      ]    = \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(address);
01206     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+2
      ]    = \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(\hyperlink{dynamixel_8h_a00be6c40bc7a1297ada4d47a028066b8}{LOWORD}( value ));
01207     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+3
      ]    = \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(\hyperlink{dynamixel_8h_a00be6c40bc7a1297ada4d47a028066b8}{LOWORD}( value ));
01208     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+4
      ]    = \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(\hyperlink{dynamixel_8h_aeb28b2d61bd674900a89bfb77e28ae07}{HIWORD}( value ));
01209     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+5
      ]    = \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(\hyperlink{dynamixel_8h_aeb28b2d61bd674900a89bfb77e28ae07}{HIWORD}( value ));
01210     
01211     \hyperlink{classdynamixel2_a2cccd455a52afe99a37b249aa834cdc7}{txrx\_packet}();
01212 \}
\end{DoxyCode}
\hypertarget{classdynamixel2_aa74bdf1e52647d6b3d290b09eac32f1d}{}\index{dynamixel2@{dynamixel2}!write\+\_\+word@{write\+\_\+word}}
\index{write\+\_\+word@{write\+\_\+word}!dynamixel2@{dynamixel2}}
\subsubsection[{write\+\_\+word}]{\setlength{\rightskip}{0pt plus 5cm}void dynamixel2\+::write\+\_\+word (
\begin{DoxyParamCaption}
\item[{unsigned char}]{id, }
\item[{int}]{address, }
\item[{unsigned short}]{value}
\end{DoxyParamCaption}
)}\label{classdynamixel2_aa74bdf1e52647d6b3d290b09eac32f1d}

\begin{DoxyCode}
01161 \{
01162     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} length = 2;
01163     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a3524b007f8f56ad0d80c1d0caf7e968a}{PRT2\_PKT\_ID}]                      = id;
01164     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a9e77ab568957b64786c810967dec8b0c}{PRT2\_PKT\_LENGTH\_L}]                  = 
      \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(length+5);
01165     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a5ea18a21d722bf72217d5408c4d2a868}{PRT2\_PKT\_LENGTH\_H}]                  = 
      \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(length+5);
01166     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_aece9dd9d7c0fa1714d53c568865d79ad}{PRT2\_PKT\_INSTRUCTION}]                = 
      \hyperlink{dynamixel_8h_a1c304d06170982719fd605a87c9101f0}{INST\_WRITE};
01167     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+0
      ]    = \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}(address);
01168     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+1
      ]    = \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}(address);
01169     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+2
      ]    = \hyperlink{dynamixel_8h_a04c0416272e5c07bdf955d803a21688e}{LOBYTE}( value );
01170     \hyperlink{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{gbInstructionPacket}[\hyperlink{dynamixel_8h_a349ccb89ae957bdcc16856ec8e2dcb00}{PRT2\_INSTRUCTION\_PKT\_PARAMETER0}+3
      ]    = \hyperlink{dynamixel_8h_a75c5b5f21e837e80c0feb4da9a421f87}{HIBYTE}( value );
01171     
01172     \hyperlink{classdynamixel2_a2cccd455a52afe99a37b249aa834cdc7}{txrx\_packet}();
01173 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{classdynamixel2_a69e9133771b69c828c277cb7191d3474}{}\index{dynamixel2@{dynamixel2}!d\+H@{d\+H}}
\index{d\+H@{d\+H}!dynamixel2@{dynamixel2}}
\subsubsection[{d\+H}]{\setlength{\rightskip}{0pt plus 5cm}{\bf dxl\+\_\+hal} dynamixel2\+::d\+H\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_a69e9133771b69c828c277cb7191d3474}
\hypertarget{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}{}\index{dynamixel2@{dynamixel2}!gb\+Comm\+Status@{gb\+Comm\+Status}}
\index{gb\+Comm\+Status@{gb\+Comm\+Status}!dynamixel2@{dynamixel2}}
\subsubsection[{gb\+Comm\+Status}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel2\+::gb\+Comm\+Status = {\bf C\+O\+M\+M\+\_\+\+R\+X\+S\+U\+C\+C\+E\+S\+S}\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_a703e327ba8ec5909c238dc94a00cb32d}
\hypertarget{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}{}\index{dynamixel2@{dynamixel2}!gb\+Instruction\+Packet@{gb\+Instruction\+Packet}}
\index{gb\+Instruction\+Packet@{gb\+Instruction\+Packet}!dynamixel2@{dynamixel2}}
\subsubsection[{gb\+Instruction\+Packet}]{\setlength{\rightskip}{0pt plus 5cm}unsigned char dynamixel2\+::gb\+Instruction\+Packet\mbox{[}{\bf M\+A\+X\+N\+U\+M\+\_\+\+T\+X\+P\+A\+C\+K\+E\+T}\mbox{]} = \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_a298efe9115fdbf77019af1001e801fb4}
\hypertarget{classdynamixel2_ad82d286e6b47c7243a3c5fd5ced0ebf4}{}\index{dynamixel2@{dynamixel2}!gb\+Rx\+Get\+Length@{gb\+Rx\+Get\+Length}}
\index{gb\+Rx\+Get\+Length@{gb\+Rx\+Get\+Length}!dynamixel2@{dynamixel2}}
\subsubsection[{gb\+Rx\+Get\+Length}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int dynamixel2\+::gb\+Rx\+Get\+Length = 0\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_ad82d286e6b47c7243a3c5fd5ced0ebf4}
\hypertarget{classdynamixel2_a7ae9bffcc9f4b087c57640881ccbb378}{}\index{dynamixel2@{dynamixel2}!gb\+Rx\+Packet\+Length@{gb\+Rx\+Packet\+Length}}
\index{gb\+Rx\+Packet\+Length@{gb\+Rx\+Packet\+Length}!dynamixel2@{dynamixel2}}
\subsubsection[{gb\+Rx\+Packet\+Length}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int dynamixel2\+::gb\+Rx\+Packet\+Length = 0\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_a7ae9bffcc9f4b087c57640881ccbb378}
\hypertarget{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}{}\index{dynamixel2@{dynamixel2}!gb\+Status\+Packet@{gb\+Status\+Packet}}
\index{gb\+Status\+Packet@{gb\+Status\+Packet}!dynamixel2@{dynamixel2}}
\subsubsection[{gb\+Status\+Packet}]{\setlength{\rightskip}{0pt plus 5cm}unsigned char dynamixel2\+::gb\+Status\+Packet\mbox{[}{\bf M\+A\+X\+N\+U\+M\+\_\+\+R\+X\+P\+A\+C\+K\+E\+T}\mbox{]} = \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_a0776f210a190cf57d1a6faf9697a593d}
\hypertarget{classdynamixel2_a5083923283d17a820b3deb940c7211a5}{}\index{dynamixel2@{dynamixel2}!g\+Bulk\+Data@{g\+Bulk\+Data}}
\index{g\+Bulk\+Data@{g\+Bulk\+Data}!dynamixel2@{dynamixel2}}
\subsubsection[{g\+Bulk\+Data}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Sync\+Bulk\+Data} dynamixel2\+::g\+Bulk\+Data\mbox{[}{\bf M\+A\+X\+\_\+\+I\+D}+1\mbox{]}\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_a5083923283d17a820b3deb940c7211a5}
\hypertarget{classdynamixel2_a786e818a88ec65d3b7e2f30b55ec31ba}{}\index{dynamixel2@{dynamixel2}!gd\+Byte\+Trans\+Time@{gd\+Byte\+Trans\+Time}}
\index{gd\+Byte\+Trans\+Time@{gd\+Byte\+Trans\+Time}!dynamixel2@{dynamixel2}}
\subsubsection[{gd\+Byte\+Trans\+Time}]{\setlength{\rightskip}{0pt plus 5cm}double dynamixel2\+::gd\+Byte\+Trans\+Time = 0.\+0\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_a786e818a88ec65d3b7e2f30b55ec31ba}
\hypertarget{classdynamixel2_ac9746f2c7ed6d706152d6d0d502993c0}{}\index{dynamixel2@{dynamixel2}!gd\+Packet\+Start\+Time@{gd\+Packet\+Start\+Time}}
\index{gd\+Packet\+Start\+Time@{gd\+Packet\+Start\+Time}!dynamixel2@{dynamixel2}}
\subsubsection[{gd\+Packet\+Start\+Time}]{\setlength{\rightskip}{0pt plus 5cm}double dynamixel2\+::gd\+Packet\+Start\+Time = 0.\+0\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_ac9746f2c7ed6d706152d6d0d502993c0}
\hypertarget{classdynamixel2_ae7b830369861e191120f9b310a68e2d8}{}\index{dynamixel2@{dynamixel2}!gd\+Rcv\+Wait\+Time@{gd\+Rcv\+Wait\+Time}}
\index{gd\+Rcv\+Wait\+Time@{gd\+Rcv\+Wait\+Time}!dynamixel2@{dynamixel2}}
\subsubsection[{gd\+Rcv\+Wait\+Time}]{\setlength{\rightskip}{0pt plus 5cm}double dynamixel2\+::gd\+Rcv\+Wait\+Time = 0.\+0\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_ae7b830369861e191120f9b310a68e2d8}
\hypertarget{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}{}\index{dynamixel2@{dynamixel2}!gi\+Bus\+Using@{gi\+Bus\+Using}}
\index{gi\+Bus\+Using@{gi\+Bus\+Using}!dynamixel2@{dynamixel2}}
\subsubsection[{gi\+Bus\+Using}]{\setlength{\rightskip}{0pt plus 5cm}int dynamixel2\+::gi\+Bus\+Using = 0\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_a7fc43b4c4b7e36aa8f0420b037658f83}
\hypertarget{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}{}\index{dynamixel2@{dynamixel2}!g\+Ping\+Data@{g\+Ping\+Data}}
\index{g\+Ping\+Data@{g\+Ping\+Data}!dynamixel2@{dynamixel2}}
\subsubsection[{g\+Ping\+Data}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ping\+Data} dynamixel2\+::g\+Ping\+Data\mbox{[}{\bf M\+A\+X\+\_\+\+I\+D}+1\mbox{]}\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_ae5cf4b09150f4a480ee23279c4e97486}
\hypertarget{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}{}\index{dynamixel2@{dynamixel2}!g\+Sync\+Data@{g\+Sync\+Data}}
\index{g\+Sync\+Data@{g\+Sync\+Data}!dynamixel2@{dynamixel2}}
\subsubsection[{g\+Sync\+Data}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Sync\+Bulk\+Data} dynamixel2\+::g\+Sync\+Data\mbox{[}{\bf M\+A\+X\+\_\+\+I\+D}+1\mbox{]}\hspace{0.3cm}{\ttfamily [private]}}\label{classdynamixel2_a5923ec2418ab7ea83cbe365ad8b200d5}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
dxl/\hyperlink{dynamixel_8h}{dynamixel.\+h}\item 
dxl/\hyperlink{dynamixel_8cpp}{dynamixel.\+cpp}\end{DoxyCompactItemize}
